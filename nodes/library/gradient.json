{
  "id": "gradient",
  "label": "Gradient",
  "category": "Generator",
  "locales": {
    "zh": {
      "Gradient": "渐变",
      "type": "类型",
      "angle": "角度",
      "scale": "缩放",
      "offset": "偏移",
      "power": "Pow",
      "result": "结果"
    }
  },
  "data": {
    "glsl": "// Gradient Generator\n// Outputs a float value (0.0 - 1.0) representing the gradient.\n\nconst int TYPE_LINEAR = 0;\nconst int TYPE_RADIAL = 1;\nconst int TYPE_ANGULAR = 2;\nconst int TYPE_DIAMOND = 3;\n\nvec2 rotate(vec2 uv, float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n    return vec2(uv.x * c - uv.y * s, uv.x * s + uv.y * c);\n}\n\nvoid run(vec2 uv, int type, float angle, float scale, float offset, float power, out float result) {\n    vec2 p = uv - 0.5;\n    p = rotate(p, -angle); // Rotate around center\n    \n    float t = 0.0;\n    \n    if (type == TYPE_LINEAR) {\n        // Linear gradient along X axis\n        t = p.x + 0.5;\n    } else if (type == TYPE_RADIAL) {\n        // Radial gradient from center\n        t = 1.0 - length(p) * 2.0;\n    } else if (type == TYPE_ANGULAR) {\n        // Angular gradient around center\n        t = atan(p.y, p.x) / 6.2831853 + 0.5;\n    } else if (type == TYPE_DIAMOND) {\n        // Diamond/Box gradient\n        t = 1.0 - (abs(p.x) + abs(p.y));\n    }\n    \n    // Apply offset\n    t = t + offset;\n    \n    // Apply scale (contrast/zoom)\n    t = (t - 0.5) * scale + 0.5;\n    \n    // Power for curve control\n    t = clamp(t, 0.0, 1.0);\n    if (power != 1.0) {\n        t = pow(t, power);\n    }\n    \n    result = t;\n}",
    "inputs": [
      {
        "id": "type",
        "name": "type",
        "type": "int"
      },
      {
        "id": "angle",
        "name": "angle",
        "type": "float"
      },
      {
        "id": "scale",
        "name": "scale",
        "type": "float"
      },
      {
        "id": "offset",
        "name": "offset",
        "type": "float"
      },
      {
        "id": "power",
        "name": "power",
        "type": "float"
      }
    ],
    "outputs": [
      {
        "id": "result",
        "name": "result",
        "type": "float"
      }
    ],
    "uniforms": {
      "type": {
        "type": "int",
        "value": 0,
        "widget": "enum",
        "widgetConfig": {
          "enumOptions": [
            {
              "label": "Linear",
              "value": 0
            },
            {
              "label": "Radial",
              "value": 1
            },
            {
              "label": "Angular",
              "value": 2
            },
            {
              "label": "Diamond",
              "value": 3
            }
          ]
        }
      },
      "angle": {
        "type": "float",
        "value": -3.14,
        "widget": "slider",
        "widgetConfig": {
          "min": -3.14,
          "max": 3.14,
          "visibleIf": {
            "uniform": "type",
            "notValue": 1
          }
        }
      },
      "scale": {
        "type": "float",
        "value": 1,
        "widget": "slider",
        "widgetConfig": {
          "min": 0.1,
          "max": 5
        }
      },
      "offset": {
        "type": "float",
        "value": 0,
        "widget": "slider",
        "widgetConfig": {
          "min": -1,
          "max": 1
        }
      },
      "power": {
        "type": "float",
        "value": 1,
        "widget": "slider",
        "widgetConfig": {
          "min": 0.1,
          "max": 5
        }
      }
    },
    "outputType": "float"
  }
}