{"nodes":[{"id":"IMAGE_1765015207882_792","type":"customShader","position":{"x":40,"y":156.15073048206386},"data":{"glsl":"void run(vec2 uv, vec2 uv_in, sampler2D image, out vec4 result) {\n  vec2 coord = (uv_in == vec2(0.0)) ? uv : uv_in;\n  result = texture2D(image, coord);\n}","inputs":[{"id":"uv_in","name":"uv_in","type":"vec2"},{"id":"image","name":"image","type":"sampler2D"}],"outputType":"vec4","outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"uv_in":{"type":"vec2","value":[0,0]},"image":{"type":"sampler2D","value":"builtin://texture/n"}},"label":"Image Loader","category":"Generator","definitionId":"IMAGE","locales":{"zh":{"Image Loader":"图片加载器","Loads an external image texture. Optional UV input.":"加载外部图片纹理。可选 UV 输入。","image":"图片"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765015241143","width":378,"height":231,"zIndex":10,"positionAbsolute":{"x":-405.1357813464216,"y":401.07711910438877},"selected":false,"hidden":false},{"id":"ADVANCED_BLOOM_1765015210347_814","type":"customShader","position":{"x":506.513668074766,"y":70},"data":{"glsl":"void run(vec2 uv, sampler2D tex, float intensity, float threshold, float radius, float scatter, int samples, vec2 shift, vec3 tint, int glow_only, out vec4 result) {\n    vec4 original = texture(tex, uv);\n    vec3 glowSum = vec3(0.0);\n    float totalWeight = 0.0;\n    \n    int count = clamp(samples, 16, 1000);\n    float aspect = 1.0;\n    if (u_resolution.y > 0.0) aspect = u_resolution.x / u_resolution.y;\n\n    float knee = 0.1 + scatter * 0.1; \n\n    for (int i = 0; i < 1000; i++) {\n        if (i >= count) break;\n        \n        float t = float(i) / float(count - 1);\n        float theta = float(i) * 2.3999632; // Golden Angle\n        \n        float r_dist = pow(t, 1.0 - (scatter * 0.5)); \n        float r = radius * 0.01 * r_dist;\n        \n        vec2 offset = vec2(sin(theta), cos(theta)) * r;\n        offset.x /= aspect;\n        offset += shift * 0.01;\n        \n        // Multi-scale sampling using textureLod\n        float lod = scatter * 6.0 * t;\n        vec3 col = textureLod(tex, uv + offset, lod).rgb;\n        \n        float br = max(col.r, max(col.g, col.b));\n        float rq = clamp((br - threshold + knee) / (2.0 * knee), 0.0, 1.0);\n        float factor = rq * rq;\n        \n        if (br < threshold - knee) factor = 0.0;\n        \n        float sigma = 0.15 + scatter * 0.5;\n        float weight = exp(-t*t / (2.0 * sigma * sigma));\n        \n        glowSum += col * factor * weight;\n        totalWeight += weight;\n    }\n    \n    vec3 glow = vec3(0.0);\n    if (totalWeight > 0.0) {\n        glow = (glowSum / totalWeight) * intensity;\n    }\n    \n    glow *= tint;\n    \n    if (glow_only == 1) {\n        result = vec4(glow, 1.0);\n    } else {\n        result = vec4(original.rgb + glow, original.a);\n    }\n}","inputs":[{"id":"tex","name":"tex","type":"sampler2D"},{"id":"intensity","name":"intensity","type":"float"},{"id":"threshold","name":"threshold","type":"float"},{"id":"radius","name":"radius","type":"float"},{"id":"scatter","name":"scatter","type":"float"},{"id":"samples","name":"samples","type":"int"},{"id":"shift","name":"shift","type":"vec2"},{"id":"tint","name":"tint","type":"vec3"},{"id":"glow_only","name":"glow_only","type":"int"}],"outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"tex":{"type":"sampler2D","value":""},"intensity":{"type":"float","value":1.84,"widgetConfig":{"min":0,"max":10}},"threshold":{"type":"float","value":0.6,"widgetConfig":{"min":0,"max":1}},"radius":{"type":"float","value":21.1,"widgetConfig":{"min":0,"max":100}},"scatter":{"type":"float","value":0.56,"widgetConfig":{"min":0,"max":1}},"samples":{"type":"int","value":1000,"widgetConfig":{"min":16,"max":1000},"widget":"default"},"shift":{"type":"vec2","value":[0,0],"widget":"pad","widgetConfig":{"minX":-1,"minY":-1}},"tint":{"type":"vec3","value":[0,1,0.984313725490196],"widget":"color"},"glow_only":{"type":"int","value":0,"widget":"toggle"}},"outputType":"vec4","label":"Adv. Bloom","category":"Filter","definitionId":"ADVANCED_BLOOM","locales":{"zh":{"Adv. Bloom":"高级泛光","Physically based bloom with multi-scale spiral sampling.":"基于物理的多尺度螺旋采样泛光效果。","intensity":"强度","threshold":"阈值","radius":"半径","scatter":"散射","samples":"采样数","shift":"偏移","tint":"色调","glow_only":"仅发光"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765015241143","width":302,"height":584,"zIndex":10,"positionAbsolute":{"x":61.37788672834438,"y":314.9263886223249},"selected":false,"hidden":false},{"id":"group-1765015241143","type":"group","position":{"x":-445.1357813464216,"y":244.9263886223249},"data":{"label":"Filter Bloom","description":"glow bloom effect","preview":false,"resolution":{"w":512,"h":512}},"width":849,"height":694,"zIndex":-10,"style":{"width":849,"height":694},"positionAbsolute":{"x":-445.1357813464216,"y":244.9263886223249},"selected":false,"hidden":false},{"id":"1765015272143_0_ayopz","type":"customShader","position":{"x":5.498984301596465,"y":36.95234827722106},"data":{"glsl":"void run(vec2 uv, vec2 uv_in, sampler2D image, out vec4 result) {\n  vec2 coord = (uv_in == vec2(0.0)) ? uv : uv_in;\n  result = texture2D(image, coord);\n}","inputs":[{"id":"uv_in","name":"uv_in","type":"vec2"},{"id":"image","name":"image","type":"sampler2D"}],"outputType":"vec4","outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"uv_in":{"type":"vec2","value":[0,0]},"image":{"type":"sampler2D","value":"builtin://texture/flow"}},"label":"Image Loader","category":"Generator","definitionId":"IMAGE","locales":{"zh":{"Image Loader":"图片加载器","Loads an external image texture. Optional UV input.":"加载外部图片纹理。可选 UV 输入。","image":"图片"}},"preview":false,"resolution":{"w":512,"h":512}},"parentId":"group-1765015291967","width":378,"height":231,"zIndex":10,"positionAbsolute":{"x":-443.9935726137712,"y":1176.4480479300557},"selected":false,"hidden":false},{"id":"rgb_offset_1765015279235_245","type":"customShader","position":{"x":516.3604483594884,"y":21.343145790249537},"data":{"glsl":"void run(vec2 uv, sampler2D image, int mode, int control_mode, vec2 offset_unified, vec2 offset_r, vec2 offset_g, vec2 offset_b, vec2 center, out vec4 output_color) {\n    vec2 uv_r = uv;\n    vec2 uv_g = uv;\n    vec2 uv_b = uv;\n\n    if (mode == 0) { // Linear\n        if (control_mode == 0) { // Unified\n            uv_r = uv - offset_unified;\n            uv_g = uv;\n            uv_b = uv + offset_unified;\n        } else { // Separate\n            uv_r = uv - offset_r;\n            uv_g = uv - offset_g;\n            uv_b = uv - offset_b;\n        }\n    } else { // Radial\n        vec2 dir = uv - center;\n        if (control_mode == 0) { // Unified\n            uv_r = uv - dir * offset_unified;\n            uv_g = uv;\n            uv_b = uv + dir * offset_unified;\n        } else {\n            uv_r = uv - dir * offset_r;\n            uv_g = uv - dir * offset_g;\n            uv_b = uv - dir * offset_b;\n        }\n    }\n\n    float r = texture(image, uv_r).r;\n    float g = texture(image, uv_g).g;\n    float b = texture(image, uv_b).b;\n    float a = texture(image, uv).a;\n\n    output_color = vec4(r, g, b, a);\n}","inputs":[{"id":"image","type":"sampler2D","name":"Image"},{"id":"mode","type":"int","name":"Mode"},{"id":"control_mode","type":"int","name":"Control Mode"},{"id":"offset_unified","type":"vec2","name":"Offset (Unified)"},{"id":"offset_r","type":"vec2","name":"Offset R"},{"id":"offset_g","type":"vec2","name":"Offset G"},{"id":"offset_b","type":"vec2","name":"Offset B"},{"id":"center","type":"vec2","name":"Center"}],"outputs":[{"id":"output","type":"vec4","name":"Output"}],"uniforms":{"mode":{"type":"int","value":0,"widget":"enum","widgetConfig":{"options":[{"label":"Linear","value":0},{"label":"Radial","value":1}],"enumOptions":[{"label":"Line","value":0},{"label":"Scale","value":1}]}},"control_mode":{"type":"int","value":0,"widget":"enum","widgetConfig":{"options":[{"label":"Unified","value":0},{"label":"Separate","value":1}],"enumOptions":[{"label":"unified","value":0},{"label":"rgb","value":1}]}},"offset_unified":{"type":"vec2","value":[-0.01,0.01],"visibleIf":{"control_mode":0},"widget":"pad","widgetConfig":{"minX":-0.1,"minY":-0.1,"maxX":0.1,"maxY":0.1,"visibleIf":{"uniform":"control_mode","value":0}}},"offset_r":{"type":"vec2","value":[0,0],"visibleIf":{"control_mode":1},"widgetConfig":{"visibleIf":{"uniform":"control_mode","value":1},"minX":-0.2,"minY":-0.2,"maxX":0.2,"maxY":0.2},"widget":"pad"},"offset_g":{"type":"vec2","value":[0,0],"visibleIf":{"control_mode":1},"widgetConfig":{"visibleIf":{"uniform":"control_mode","value":1},"minX":-0.2,"maxX":0.2,"minY":-0.2,"maxY":0.2},"widget":"pad"},"offset_b":{"type":"vec2","value":[0,0],"visibleIf":{"control_mode":1},"widgetConfig":{"visibleIf":{"uniform":"control_mode","value":1},"maxX":0.2,"minX":-0.2,"minY":-0.2,"maxY":0.2},"widget":"pad"},"center":{"type":"vec2","value":[0.5,0.5],"visibleIf":{"mode":1},"widgetConfig":{"visibleIf":{"uniform":"mode","value":1}},"widget":"pad"}},"outputType":"vec4","label":"RGB Offset","category":"Filter","definitionId":"rgb_offset","locales":{"zh":{"RGB Offset":"RGB偏移","Image":"图像","Mode":"模式","Control Mode":"控制模式","Offset (Unified)":"偏移(统一)","Offset R":"偏移R","Offset G":"偏移G","Offset B":"偏移B","Center":"中心","Output":"输出"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765015291967","width":295,"height":289,"zIndex":10,"positionAbsolute":{"x":66.86789144412069,"y":1160.8388454430842},"selected":false,"hidden":false},{"id":"group-1765015291967","type":"group","position":{"x":-449.4925569153677,"y":1139.4956996528347},"data":{"label":"Filter RGB-offset","description":"","resolution":{"w":512,"h":512},"preview":false},"width":1763,"height":1360,"zIndex":-10,"style":{"width":1763,"height":1360},"positionAbsolute":{"x":-449.4925569153677,"y":1139.4956996528347},"selected":false,"hidden":false},{"id":"ADVANCED_DISPERSION_1765612450679_616","type":"customShader","position":{"x":1335.0852916993488,"y":339.9255299455897},"data":{"glsl":"// Helper to calculate spectral weight for a given t [0, 1]\n// t=0 (Red), t=0.5 (Green), t=1 (Blue)\nvec3 spectral_weight(float t) {\n    vec3 w = vec3(0.0);\n    // Gaussian curves for R, G, B\n    float sigma = 0.2;\n    w.r = exp(-pow(t - 0.0, 2.0) / (2.0 * sigma * sigma));\n    w.g = exp(-pow(t - 0.5, 2.0) / (2.0 * sigma * sigma));\n    w.b = exp(-pow(t - 1.0, 2.0) / (2.0 * sigma * sigma));\n    return w;\n}\n\nvoid run(vec2 uv, sampler2D tex, sampler2D normalMap, float strength, float dispersion, float radius, float angle, int samples, int lens_mode, out vec4 result) {\n    vec2 distortion = vec2(0.0);\n\n    if (lens_mode == 1) {\n        // Radial (Lens) Mode\n        vec2 dir = uv - 0.5;\n        float dist = length(dir);\n        float mask = smoothstep(radius, radius * 0.5, dist);\n        distortion = dir * (dist * strength) * mask;\n    } else if (lens_mode == 2) {\n        // Swirl Mode\n        vec2 center = vec2(0.5);\n        vec2 tc = uv - center;\n        float dist = length(tc);\n        if (dist < radius) {\n            float percent = (radius - dist) / radius;\n            float theta = percent * percent * strength * 10.0;\n            float s = sin(theta);\n            float c = cos(theta);\n            vec2 rotated = vec2(tc.x * c - tc.y * s, tc.x * s + tc.y * c);\n            distortion = rotated - tc;\n        }\n    } else if (lens_mode == 3) {\n        // Wave Mode\n        float freq = 20.0;\n        distortion = vec2(\n            sin(uv.y * freq) * 0.05 * strength,\n            cos(uv.x * freq) * 0.05 * strength\n        );\n    } else if (lens_mode == 4) {\n        // Linear (Prism) Mode\n        float rad = radians(angle);\n        vec2 dir = vec2(cos(rad), sin(rad));\n        distortion = dir * strength * 0.05;\n    } else {\n        // Normal Map Mode (Default 0)\n        vec4 normSample = texture(normalMap, uv);\n        vec3 normal = normalize(normSample.rgb * 2.0 - 1.0);\n        distortion = normal.xy * strength * 0.1;\n    }\n\n    // Multi-sample Dispersion\n    vec3 sumColor = vec3(0.0);\n    vec3 sumWeight = vec3(0.0);\n    \n    // Clamp samples to reasonable range\n    int numSamples = clamp(samples, 3, 32);\n    \n    for (int i = 0; i < 32; i++) {\n        if (i >= numSamples) break;\n        \n        float t = float(i) / float(numSamples - 1);\n        \n        // Calculate offset for this spectral band\n        // t goes from 0 (Red) to 1 (Blue)\n        // We map this to dispersion range: [1.0 - disp, 1.0 + disp]\n        float dispFactor = (1.0 - dispersion) + t * (2.0 * dispersion);\n        vec2 offset = distortion * dispFactor;\n        \n        vec3 col = texture(tex, clamp(uv - offset, 0.0, 1.0)).rgb;\n        vec3 w = spectral_weight(t);\n        \n        sumColor += col * w;\n        sumWeight += w;\n    }\n    \n    // Normalize\n    vec3 finalColor = sumColor / sumWeight;\n    float alpha = texture(tex, clamp(uv - distortion, 0.0, 1.0)).a; // Use center alpha\n\n    result = vec4(finalColor, alpha);\n}","inputs":[{"id":"tex","name":"Input Image","type":"sampler2D"},{"id":"normalMap","name":"Normal Map","type":"sampler2D"},{"id":"strength","name":"Strength","type":"float","default":0.5},{"id":"dispersion","name":"Dispersion","type":"float","default":0.1},{"id":"radius","name":"Radius","type":"float","default":0.5},{"id":"angle","name":"Angle","type":"float","default":0},{"id":"samples","name":"Samples","type":"int","default":8},{"id":"lens_mode","name":"Lens Mode","type":"int","default":0}],"uniforms":{"strength":{"type":"float","value":1.99,"widgetConfig":{"min":-2,"max":2,"step":0.01}},"dispersion":{"type":"float","value":0.28,"widgetConfig":{"min":0,"max":1,"step":0.01}},"radius":{"type":"float","value":0.5,"widgetConfig":{"min":0,"max":1.5,"step":0.01,"visibleIf":{"uniform":"lens_mode","value":[1,2]}}},"angle":{"type":"float","value":106,"widgetConfig":{"min":0,"max":360,"step":1,"visibleIf":{"uniform":"lens_mode","value":4}}},"samples":{"type":"int","value":8,"widgetConfig":{"min":3,"max":32,"step":1}},"lens_mode":{"type":"int","value":0,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Normal Map","value":0},{"label":"Radial","value":1},{"label":"Swirl","value":2},{"label":"Wave","value":3},{"label":"Linear","value":4}]}},"tex":{"type":"sampler2D","value":null},"normalMap":{"type":"sampler2D","value":null}},"outputType":"vec4","outputs":[{"id":"result","name":"Result","type":"vec4"}],"label":"Refraction & Dispersion","category":"Filter","definitionId":"ADVANCED_DISPERSION","locales":{"zh":{"Refraction & Dispersion":"折射与色散","Simulates refraction and chromatic aberration using a normal map or lens distortion.":"使用法线贴图或透镜畸变模拟折射和色散效果。","Input Image":"输入图像","Strength":"折射强度","Dispersion":"色散程度","Lens Mode":"畸变模式","Radius":"半径","Samples":"采样质量","Normal Map":"法线贴图","Radial":"径向 (透镜)","Swirl":"漩涡","Wave":"波纹","Linear":"线性 (棱镜)","Angle":"角度"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765015291967","width":282,"height":378,"zIndex":10,"positionAbsolute":{"x":885.5927347839811,"y":1479.4212295984244},"selected":false,"hidden":false},{"id":"1765612506431_0_x3idb","type":"customShader","position":{"x":14.813515876229246,"y":348.3332809420267},"data":{"glsl":"void run(vec2 uv, vec2 uv_in, sampler2D image, out vec4 result) {\n  vec2 coord = (uv_in == vec2(0.0)) ? uv : uv_in;\n  result = texture2D(image, coord);\n}","inputs":[{"id":"uv_in","name":"uv_in","type":"vec2"},{"id":"image","name":"image","type":"sampler2D"}],"outputType":"vec4","outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"uv_in":{"type":"vec2","value":[0,0]},"image":{"type":"sampler2D","value":"builtin://texture/n"}},"label":"Image Loader","category":"Generator","definitionId":"IMAGE","locales":{"zh":{"Image Loader":"图片加载器","Loads an external image texture. Optional UV input.":"加载外部图片纹理。可选 UV 输入。","image":"图片"}},"preview":false,"resolution":{"w":512,"h":512}},"parentId":"group-1765015291967","width":378,"height":231,"zIndex":10,"positionAbsolute":{"x":-434.67904103913844,"y":1487.8289805948614},"selected":false,"hidden":false},{"id":"REMOVE_BLACK_1765613607596_907","type":"customShader","position":{"x":72.33014792077552,"y":622.8526403559681},"data":{"glsl":"void run(vec2 uv, vec4 input_col, int mode, float low, float high, int unpremult, out vec4 result) {\n    float val = 0.0;\n    if (mode == 0) {\n        // Max RGB\n        val = max(input_col.r, max(input_col.g, input_col.b));\n    } else {\n        // Luminance\n        val = dot(input_col.rgb, vec3(0.299, 0.587, 0.114));\n    }\n    \n    // Calculate Alpha using smoothstep for better control\n    float alpha = smoothstep(low, high, val);\n    \n    vec3 out_rgb = input_col.rgb;\n    \n    // Unpremultiply: Boost RGB to recover original color intensity for straight alpha blending\n    if (unpremult == 1 && alpha > 0.0001) {\n        // We use the original 'val' as the divisor because that represents the original 'alpha' assumption\n        // But using the new 'alpha' ensures we don't boost clipped regions incorrectly.\n        // However, standard unpremult uses the alpha channel.\n        out_rgb = input_col.rgb / max(0.0001, val); \n        // Note: dividing by 'val' (original brightness) is mathematically closer to recovering the color \n        // before it was multiplied by black.\n        \n        // Clamp to avoid HDR artifacts if needed\n        out_rgb = clamp(out_rgb, 0.0, 1.0);\n    }\n    \n    result = vec4(out_rgb, alpha);\n}","outputType":"vec4","inputs":[{"id":"input_col","name":"Input","type":"vec4"},{"id":"mode","name":"Mode","type":"int"},{"id":"low","name":"Low Clip","type":"float"},{"id":"high","name":"High Clip","type":"float"},{"id":"unpremult","name":"Unpremultiply","type":"int"}],"outputs":[{"id":"result","name":"Output","type":"vec4"}],"uniforms":{"mode":{"type":"int","value":0,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Max RGB","value":0},{"label":"Luminance","value":1}]}},"low":{"type":"float","value":0,"widget":"slider","widgetConfig":{"min":0,"max":1}},"high":{"type":"float","value":1,"widget":"slider","widgetConfig":{"min":0,"max":2}},"unpremult":{"type":"int","value":0,"widget":"toggle"},"input_col":{"type":"vec4","value":[0,0,0,1]}},"label":"Remove Black","category":"Filter","definitionId":"REMOVE_BLACK","locales":{"zh":{"Remove Black":"去黑底 (Remove Black)","Input":"输入","Mode":"模式","Low Clip":"黑场阈值","High Clip":"白场阈值","Unpremultiply":"色彩还原(去预乘)","Output":"输出"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765015291967","width":381,"height":359,"zIndex":10,"positionAbsolute":{"x":-377.16240899459217,"y":1762.3483400088028},"selected":false,"hidden":false},{"id":"BEVEL_EMBOSS_1765613618596_52","type":"customShader","position":{"x":593.9926741095637,"y":405.2618860317393},"data":{"glsl":"vec3 blendNormal(vec3 base, vec3 blend) {\n    return blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n    return base * blend;\n}\n\nvec3 blendScreen(vec3 base, vec3 blend) {\n    return 1.0 - (1.0 - base) * (1.0 - blend);\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend) {\n    return mix(2.0 * base * blend, 1.0 - 2.0 * (1.0 - base) * (1.0 - blend), step(0.5, base));\n}\n\nvec3 blendLinearDodge(vec3 base, vec3 blend) {\n    return min(base + blend, 1.0);\n}\n\nvec3 blendLinearBurn(vec3 base, vec3 blend) {\n    return max(base + blend - 1.0, 0.0);\n}\n\nvec3 applyBlend(int mode, vec3 base, vec3 blend) {\n    if (mode == 0) return blendNormal(base, blend);\n    if (mode == 1) return blendMultiply(base, blend);\n    if (mode == 2) return blendScreen(base, blend);\n    if (mode == 3) return blendOverlay(base, blend);\n    if (mode == 4) return blendLinearDodge(base, blend);\n    if (mode == 5) return blendLinearBurn(base, blend);\n    return blend;\n}\n\nfloat getSample(sampler2D tex, vec2 uv, float soften) {\n    if (soften <= 0.1) return texture(tex, uv).a;\n    \n    float total = 0.0;\n    float totalWeight = 0.0;\n    \n    // 16x16 Gaussian Blur (256 samples)\n    for(float i = 0.0; i < 16.0; i++) {\n        float x = (i / 15.0) * 2.0 - 1.0;\n        for(float j = 0.0; j < 16.0; j++) {\n            float y = (j / 15.0) * 2.0 - 1.0;\n            \n            float d2 = x*x + y*y;\n            float w = exp(-d2 * 2.0);\n            \n            vec2 offset = vec2(x, y) * (soften / u_resolution);\n            total += texture(tex, uv + offset).a * w;\n            totalWeight += w;\n        }\n    }\n    \n    return total / totalWeight;\n}\n\nvoid run(vec2 uv, sampler2D inputTex, int style, float depth, float size, float soften, float angle, float altitude, float hiOpacity, float shOpacity, vec3 hiColor, vec3 shColor, int direction, int hiMode, int shMode, out vec4 result) {\n    vec4 original = texture(inputTex, uv);\n    \n    // 1. Calculate Offset\n    float rad = radians(angle);\n    vec2 dirVec = vec2(cos(rad), sin(rad));\n    vec2 offset = dirVec * (size / u_resolution);\n    \n    // 2. Central Difference Sampling with Soften\n    float h1 = getSample(inputTex, uv - offset, soften);\n    float h2 = getSample(inputTex, uv + offset, soften);\n    \n    // 3. Calculate Slope\n    float diff = h1 - h2;\n    \n    // Style Adjustments\n    if (style == 3) { // Pillow\n        diff = -diff;\n    }\n    \n    // Direction: Up vs Down\n    if (direction == 1) { // Down\n        diff = -diff;\n    }\n    \n    // 4. Calculate Intensity\n    float altFactor = cos(radians(clamp(altitude, 0.0, 89.0)));\n    float intensity = diff * (depth / 100.0) * altFactor;\n    \n    // 5. Determine Mask\n    float mask = 0.0;\n    if (style == 0) { // Inner\n        mask = original.a;\n    } else if (style == 1) { // Outer\n        mask = 1.0 - original.a;\n    } else { // Emboss (2) & Pillow (3)\n        mask = 1.0;\n    }\n    \n    // Soften mask for Outer/Emboss\n    float edgePresence = smoothstep(0.0, 0.1, abs(diff));\n    if (style != 0) {\n        mask *= edgePresence;\n    }\n    \n    // 6. Apply Lighting\n    float highlightAmt = clamp(intensity, 0.0, 1.0) * (hiOpacity / 100.0) * mask;\n    float shadowAmt = clamp(-intensity, 0.0, 1.0) * (shOpacity / 100.0) * mask;\n    \n    vec3 rgb = original.rgb;\n    \n    // Apply Highlight\n    vec3 hiBlended = applyBlend(hiMode, rgb, hiColor);\n    rgb = mix(rgb, hiBlended, highlightAmt);\n    \n    // Apply Shadow\n    vec3 shBlended = applyBlend(shMode, rgb, shColor);\n    rgb = mix(rgb, shBlended, shadowAmt);\n    \n    // 7. Output Alpha\n    float outAlpha = original.a;\n    if (style != 0) {\n        float effectAlpha = max(highlightAmt, shadowAmt);\n        outAlpha = max(original.a, effectAlpha);\n    }\n    \n    result = vec4(rgb, outAlpha);\n}","inputs":[{"id":"inputTex","name":"Input","type":"sampler2D"},{"id":"style","name":"Style","type":"int"},{"id":"depth","name":"Depth","type":"float"},{"id":"size","name":"Size","type":"float"},{"id":"soften","name":"Soften","type":"float"},{"id":"angle","name":"Angle","type":"float"},{"id":"altitude","name":"Altitude","type":"float"},{"id":"hiOpacity","name":"Highlight Opacity","type":"float"},{"id":"shOpacity","name":"Shadow Opacity","type":"float"},{"id":"hiColor","name":"Highlight Color","type":"vec3"},{"id":"shColor","name":"Shadow Color","type":"vec3"},{"id":"direction","name":"Direction","type":"int"},{"id":"hiMode","name":"Highlight Mode","type":"int"},{"id":"shMode","name":"Shadow Mode","type":"int"}],"outputs":[{"id":"result","name":"Result","type":"vec4"}],"outputType":"vec4","uniforms":{"style":{"type":"int","value":0,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Inner Bevel","value":0},{"label":"Outer Bevel","value":1},{"label":"Emboss","value":2},{"label":"Pillow Emboss","value":3}]}},"depth":{"type":"float","value":100,"widget":"slider","widgetConfig":{"min":1,"max":1000,"step":1}},"size":{"type":"float","value":11,"widget":"slider","widgetConfig":{"min":0,"max":250,"step":1}},"soften":{"type":"float","value":9,"widget":"slider","widgetConfig":{"min":0,"max":32,"step":1}},"angle":{"type":"float","value":30,"widget":"angle","widgetConfig":{"min":0,"max":360,"step":1}},"altitude":{"type":"float","value":30,"widget":"slider","widgetConfig":{"min":0,"max":90,"step":1}},"hiColor":{"type":"vec3","value":[1,1,1],"widget":"color"},"hiMode":{"type":"int","value":2,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Normal","value":0},{"label":"Multiply","value":1},{"label":"Screen","value":2},{"label":"Overlay","value":3},{"label":"Linear Dodge","value":4},{"label":"Linear Burn","value":5}]}},"hiOpacity":{"type":"float","value":75,"widget":"slider","widgetConfig":{"min":0,"max":100,"step":1}},"shColor":{"type":"vec3","value":[0,0,0],"widget":"color"},"shMode":{"type":"int","value":1,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Normal","value":0},{"label":"Multiply","value":1},{"label":"Screen","value":2},{"label":"Overlay","value":3},{"label":"Linear Dodge","value":4},{"label":"Linear Burn","value":5}]}},"shOpacity":{"type":"float","value":75,"widget":"slider","widgetConfig":{"min":0,"max":100,"step":1}},"direction":{"type":"int","value":0,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Up","value":0},{"label":"Down","value":1}]}},"inputTex":{"type":"sampler2D","value":null}},"label":"Bevel & Emboss","category":"Filter","definitionId":"BEVEL_EMBOSS","locales":{"zh":{"Bevel & Emboss":"斜面和浮雕","Input":"输入","Style":"样式","Inner Bevel":"内斜面","Outer Bevel":"外斜面","Emboss":"浮雕效果","Pillow Emboss":"枕状浮雕","Depth":"深度 (%)","Size":"大小 (px)","Soften":"软化 (px)","Angle":"角度","Altitude":"高度","Highlight Opacity":"高光不透明度","Shadow Opacity":"阴影不透明度","Highlight Color":"高光颜色","Shadow Color":"阴影颜色","Direction":"方向","Up":"上","Down":"下","Highlight Mode":"高光模式","Shadow Mode":"阴影模式","Normal":"正常","Multiply":"正片叠底","Screen":"滤色","Overlay":"叠加","Linear Dodge":"线性减淡 (添加)","Linear Burn":"线性加深"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765015291967","width":296,"height":875,"zIndex":10,"positionAbsolute":{"x":144.50011719419604,"y":1544.757585684574},"selected":false,"hidden":false},{"id":"HEIGHT_TO_NORMAL_1765613636115_348","type":"customShader","position":{"x":931.3507784761326,"y":581.8804245076003},"data":{"glsl":"void run(vec2 uv, sampler2D tex, float strength, out vec4 result) {\n    // Calculate texel size based on current resolution\n    vec2 texel = 1.0 / u_resolution.xy;\n    \n    // Sobel Operator for high quality gradients\n    // Sample surrounding pixels\n    float tl = texture(tex, uv + texel * vec2(-1, -1)).r;\n    float t  = texture(tex, uv + texel * vec2( 0, -1)).r;\n    float tr = texture(tex, uv + texel * vec2( 1, -1)).r;\n    float l  = texture(tex, uv + texel * vec2(-1,  0)).r;\n    float r  = texture(tex, uv + texel * vec2( 1,  0)).r;\n    float bl = texture(tex, uv + texel * vec2(-1,  1)).r;\n    float b  = texture(tex, uv + texel * vec2( 0,  1)).r;\n    float br = texture(tex, uv + texel * vec2( 1,  1)).r;\n    \n    // Compute gradients\n    // X direction: Right - Left\n    float dX = (tr + 2.0 * r + br) - (tl + 2.0 * l + bl);\n    \n    // Y direction: Bottom - Top\n    float dY = (bl + 2.0 * b + br) - (tl + 2.0 * t + tr);\n    \n    // Construct normal vector\n    // The strength parameter scales the slope\n    vec3 normal = normalize(vec3(-dX * strength, -dY * strength, 1.0));\n    \n    // Map [-1, 1] range to [0, 1] for texture storage\n    result = vec4(normal * 0.5 + 0.5, 1.0);\n}","inputs":[{"id":"tex","name":"Height Map","type":"sampler2D"},{"id":"strength","name":"Strength","type":"float","default":1}],"uniforms":{"strength":{"type":"float","value":2,"widgetConfig":{"min":0.1,"max":10,"step":0.1}},"tex":{"type":"sampler2D","value":null}},"outputType":"vec4","outputs":[{"id":"result","name":"Result","type":"vec4"}],"label":"Height to Normal","category":"Filter","definitionId":"HEIGHT_TO_NORMAL","locales":{"zh":{"Height to Normal":"高度转法线","Converts a grayscale height map into a normal map.":"将灰度高度图转换为法线贴图。","Height Map":"高度图","Strength":"强度"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765015291967","width":282,"height":155,"zIndex":10,"positionAbsolute":{"x":481.85822156076495,"y":1721.376124160435},"selected":false,"hidden":false},{"id":"IMAGE_1765019129292_492_shared_1765614416073","type":"customShader","position":{"x":40,"y":623.2543912633123},"data":{"glsl":"void run(vec2 uv, vec2 uv_in, sampler2D image, out vec4 result) {\n  vec2 coord = (uv_in == vec2(0.0)) ? uv : uv_in;\n  result = texture2D(image, coord);\n}","inputs":[{"id":"uv_in","name":"uv_in","type":"vec2"},{"id":"image","name":"image","type":"sampler2D"}],"outputType":"vec4","outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"uv_in":{"type":"vec2","value":[0,0]},"image":{"type":"sampler2D","value":"builtin://texture/n"}},"label":"Image Loader","category":"Generator","definitionId":"IMAGE","locales":{"zh":{"Image Loader":"图片加载器","Loads an external image texture. Optional UV input.":"加载外部图片纹理。可选 UV 输入。","image":"图片"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":378,"height":231,"zIndex":10,"positionAbsolute":{"x":-395.14412056316473,"y":3336.776919207032},"selected":false,"hidden":false},{"id":"DISSOLVE_1765019321740_485_shared_1765614416073","type":"customShader","position":{"x":1570.6667422770129,"y":931.6963285156576},"data":{"glsl":"void run(vec2 uv, sampler2D tex, float noise, float progress, float edge_softness, vec3 edge_color, float edge_intensity, float edge_width, float edge_power, int edge_only, int blend_mode, out vec4 result) {\n    vec4 color = texture(tex, uv);\n    float lum = dot(color.rgb, vec3(0.299, 0.587, 0.114));\n    \n    float n_val = noise;\n    \n    if (blend_mode == 1) {\n        // Multiply: Dark areas dissolve first\n        n_val = n_val * lum;\n    } else if (blend_mode == 2) {\n        // Add: Weighted mix\n        n_val = (n_val + lum) * 0.5;\n    } else if (blend_mode == 3) {\n        // Luminance Only\n        n_val = lum;\n    } else if (blend_mode == 4) {\n        // Overlay\n        float base = lum;\n        float blend = n_val;\n        n_val = base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend));\n    }\n    \n    if (n_val < progress) {\n        result = vec4(0.0);\n        return;\n    }\n    \n    float edge = 0.0;\n    if (n_val < progress + edge_width) {\n        float d = (n_val - progress) / max(0.0001, edge_width);\n        edge = 1.0 - smoothstep(1.0 - edge_softness, 1.0, d);\n        edge = pow(edge, edge_power);\n    }\n    \n    vec3 edge_final = edge_color * edge_intensity;\n    float alpha_edge = edge * color.a;\n    \n    if (edge_only == 1) {\n        result = vec4(edge_final * alpha_edge, alpha_edge);\n    } else {\n        // Mix based on alpha_edge to respect transparency\n        result = vec4(mix(color.rgb, edge_final, alpha_edge), color.a);\n    }\n}","inputs":[{"id":"tex","name":"tex","type":"sampler2D"},{"id":"noise","name":"noise","type":"float"},{"id":"progress","name":"progress","type":"float"},{"id":"edge_softness","name":"edge_softness","type":"float"},{"id":"edge_color","name":"edge_color","type":"vec3"},{"id":"edge_intensity","name":"edge_intensity","type":"float"},{"id":"edge_width","name":"edge_width","type":"float"},{"id":"edge_power","name":"edge_power","type":"float"},{"id":"edge_only","name":"edge_only","type":"int"},{"id":"blend_mode","name":"blend_mode","type":"int"}],"outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"tex":{"type":"sampler2D","value":null},"noise":{"type":"float","value":0.48},"progress":{"type":"float","value":0.41,"widget":"slider","widgetConfig":{"min":0,"max":1,"step":0.01}},"edge_softness":{"type":"float","value":1,"widget":"slider","widgetConfig":{"min":0.01,"max":1,"step":0.01}},"edge_color":{"type":"vec3","value":[1,1,1],"widget":"color"},"edge_intensity":{"type":"float","value":3.7,"widget":"slider","widgetConfig":{"min":0,"max":10,"step":0.1}},"edge_width":{"type":"float","value":0.05,"widget":"slider","widgetConfig":{"min":0.01,"max":0.5,"step":0.01}},"edge_power":{"type":"float","value":4.2,"widget":"slider","widgetConfig":{"min":0.1,"max":5,"step":0.1}},"edge_only":{"type":"int","value":1,"widget":"toggle"},"blend_mode":{"type":"int","value":0,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Noise Only","value":0},{"label":"Multiply (Noise * Image)","value":1},{"label":"Add (Noise + Image)","value":2},{"label":"Image Luminance","value":3},{"label":"Overlay","value":4}]}}},"outputType":"vec4","label":"Dissolve","category":"Effect","definitionId":"DISSOLVE","locales":{"zh":{"Dissolve":"溶解 (Dissolve)","Dissolves the texture based on a noise map":"根据噪波图溶解纹理","tex":"纹理","noise_tex":"溶解图(噪波)","progress":"进度","edge_softness":"边缘柔化","edge_color":"边缘颜色","edge_intensity":"边缘强度","edge_width":"边缘宽度","edge_power":"边缘指数","edge_only":"仅显示边缘","blend_mode":"叠加模式","result":"结果","noise":"溶解灰度图"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":599,"zIndex":10,"positionAbsolute":{"x":1135.5226217138481,"y":3645.218856459377},"selected":false,"hidden":false},{"id":"noise_1765019330188_466_shared_1765614416073","type":"customShader","position":{"x":850.5172604375548,"y":918.8840325057283},"data":{"glsl":"vec2 noise_hash(vec2 p) {\n    p = vec2(dot(p,vec2(127.1,311.7)), dot(p,vec2(269.5,183.3)));\n    return -1.0 + 2.0*fract(sin(p)*43758.5453123);\n}\n\nfloat noise_gnoise(in vec2 p) {\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n    vec2 u = f*f*(3.0-2.0*f);\n    return mix( mix( dot( noise_hash( i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ),\n                     dot( noise_hash( i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\n                mix( dot( noise_hash( i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ),\n                     dot( noise_hash( i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\n}\n\nvoid run(vec2 uv, float scale, float detail, float roughness, float distortion, vec2 offset, out float result) {\n    vec2 p = (uv + offset) * scale;\n    float f = 0.0;\n    float w = 0.5;\n    float tot = 0.0;\n    for (int i = 0; i < 8; i++) {\n        if (float(i) >= detail) break;\n        // Domain warping: add previous noise value to position\n        float n = noise_gnoise(p + distortion * f);\n        f += w * n;\n        p *= 2.0;\n        tot += w;\n        w *= roughness;\n    }\n    // Normalize result to 0.0 - 1.0 range\n    // gnoise is approx -0.7 to 0.7, but FBM sums up.\n    // We normalize by total weight to keep it in -1..1 range roughly\n    // Then map to 0..1\n    result = 0.5 + 0.5 * (f / tot);\n}","inputs":[{"id":"scale","name":"Scale","type":"float"},{"id":"detail","name":"Detail","type":"float"},{"id":"roughness","name":"Roughness","type":"float"},{"id":"distortion","name":"Distortion","type":"float"},{"id":"offset","name":"Offset","type":"vec2"}],"outputs":[{"id":"result","name":"Result","type":"float"}],"uniforms":{"scale":{"type":"float","value":4.7,"widget":"slider","widgetConfig":{"min":0.1,"max":50}},"detail":{"type":"float","value":8,"widget":"slider","widgetConfig":{"min":1,"max":8,"step":1}},"roughness":{"type":"float","value":0.47,"widget":"slider","widgetConfig":{"min":0,"max":1}},"distortion":{"type":"float","value":2,"widget":"slider","widgetConfig":{"min":0,"max":2}},"offset":{"type":"vec2","value":[0.56,0.64],"widget":"pad"}},"outputType":"float","label":"Noise","category":"Generator","definitionId":"noise","locales":{"zh":{"Noise":"噪波","Generates high-quality Fractal Brownian Motion (FBM) noise with domain warping support.":"生成支持域扭曲的高质量分形布朗运动 (FBM) 噪波。","Scale":"缩放","Detail":"细节","Roughness":"粗糙度","Distortion":"扭曲","Offset":"偏移","Result":"结果"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":295,"height":363,"zIndex":10,"positionAbsolute":{"x":415.37313987439006,"y":3632.406560449448},"selected":false,"hidden":false},{"id":"ADVANCED_BLOOM_1765019562565_300_shared_1765614416073","type":"customShader","position":{"x":2278.0261409675863,"y":500.5512105944033},"data":{"glsl":"void run(vec2 uv, sampler2D tex, float intensity, float threshold, float radius, float scatter, int samples, vec2 shift, vec3 tint, int glow_only, out vec4 result) {\n    vec4 original = texture(tex, uv);\n    vec3 glowSum = vec3(0.0);\n    float totalWeight = 0.0;\n    \n    int count = clamp(samples, 16, 1000);\n    float aspect = 1.0;\n    if (u_resolution.y > 0.0) aspect = u_resolution.x / u_resolution.y;\n\n    float knee = 0.1 + scatter * 0.1; \n\n    for (int i = 0; i < 1000; i++) {\n        if (i >= count) break;\n        \n        float t = float(i) / float(count - 1);\n        float theta = float(i) * 2.3999632; // Golden Angle\n        \n        float r_dist = pow(t, 1.0 - (scatter * 0.5)); \n        float r = radius * 0.01 * r_dist;\n        \n        vec2 offset = vec2(sin(theta), cos(theta)) * r;\n        offset.x /= aspect;\n        offset += shift * 0.01;\n        \n        // Multi-scale sampling using textureLod\n        float lod = scatter * 6.0 * t;\n        vec3 col = textureLod(tex, uv + offset, lod).rgb;\n        \n        float br = max(col.r, max(col.g, col.b));\n        float rq = clamp((br - threshold + knee) / (2.0 * knee), 0.0, 1.0);\n        float factor = rq * rq;\n        \n        if (br < threshold - knee) factor = 0.0;\n        \n        float sigma = 0.15 + scatter * 0.5;\n        float weight = exp(-t*t / (2.0 * sigma * sigma));\n        \n        glowSum += col * factor * weight;\n        totalWeight += weight;\n    }\n    \n    vec3 glow = vec3(0.0);\n    if (totalWeight > 0.0) {\n        glow = (glowSum / totalWeight) * intensity;\n    }\n    \n    glow *= tint;\n    \n    if (glow_only == 1) {\n        result = vec4(glow, 1.0);\n    } else {\n  float  glowA2=max(max(glow.r,glow.g),glow.b);\n        result = vec4(original.rgb + glow, glowA2);\n    }\n}","inputs":[{"id":"tex","name":"tex","type":"sampler2D"},{"id":"intensity","name":"intensity","type":"float"},{"id":"threshold","name":"threshold","type":"float"},{"id":"radius","name":"radius","type":"float"},{"id":"scatter","name":"scatter","type":"float"},{"id":"samples","name":"samples","type":"int"},{"id":"shift","name":"shift","type":"vec2"},{"id":"tint","name":"tint","type":"vec3"},{"id":"glow_only","name":"glow_only","type":"int"}],"outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"tex":{"type":"sampler2D","value":""},"intensity":{"type":"float","value":11.88,"widgetConfig":{"min":0,"max":20},"widget":"default"},"threshold":{"type":"float","value":1,"widgetConfig":{"min":0,"max":1}},"radius":{"type":"float","value":17.94,"widgetConfig":{"min":0,"max":100}},"scatter":{"type":"float","value":0.53,"widgetConfig":{"min":0,"max":1}},"samples":{"type":"int","value":995,"widgetConfig":{"min":16,"max":1000},"widget":"default"},"shift":{"type":"vec2","value":[0,0],"widget":"pad","widgetConfig":{"minX":-1,"minY":-1}},"tint":{"type":"vec3","value":[1,0.4823529411764706,0.25882352941176473],"widget":"color"},"glow_only":{"type":"int","value":1,"widget":"toggle"}},"outputType":"vec4","label":"Adv. Bloom","category":"Filter","definitionId":"ADVANCED_BLOOM","locales":{"zh":{"Adv. Bloom":"高级泛光","Physically based bloom with multi-scale spiral sampling.":"基于物理的多尺度螺旋采样泛光效果。","intensity":"强度","threshold":"阈值","radius":"半径","scatter":"散射","samples":"采样数","shift":"偏移","tint":"色调","glow_only":"仅发光"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root","autoType":false},"parentId":"group-1765020305834_shared_1765614416073","width":302,"height":584,"zIndex":10,"positionAbsolute":{"x":1842.8820204044216,"y":3214.0737385381226},"selected":false,"hidden":false},{"id":"MULTIPLY_1765019591794_111_shared_1765614416073","type":"customShader","position":{"x":1943.1884549799665,"y":1122.623190419778},"data":{"autoType":true,"glsl":"// Overloaded functions for dynamic typing\nvoid run(vec2 uv, float a, float b, out float res) { res = a * b; }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = a * b; }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = a * b; }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = a * b; }","inputs":[{"id":"a","name":"a","type":"vec4"},{"id":"b","name":"b","type":"vec4"}],"outputType":"vec4","outputs":[{"id":"res","name":"res","type":"vec4"}],"uniforms":{"a":{"type":"vec4","value":[1,1,1,1]},"b":{"type":"vec4","value":[1,1,1,1]}},"label":"Multiply","category":"Math","definitionId":"MULTIPLY","locales":{"zh":{"Multiply":"乘法","Multiplies two inputs (A * B). Good for masking.":"将两个输入相乘 (A * B)。适用于遮罩。"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":375,"height":220,"zIndex":10,"positionAbsolute":{"x":1508.0443344168018,"y":3836.1457183634975},"selected":false,"hidden":false},{"id":"1765019597623_0_w5291_shared_1765614416073","type":"customShader","position":{"x":967.1057893390208,"y":1489.0065140077668},"data":{"glsl":"vec2 noise_hash(vec2 p) {\n    p = vec2(dot(p,vec2(127.1,311.7)), dot(p,vec2(269.5,183.3)));\n    return -1.0 + 2.0*fract(sin(p)*43758.5453123);\n}\n\nfloat noise_gnoise(in vec2 p) {\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n    vec2 u = f*f*(3.0-2.0*f);\n    return mix( mix( dot( noise_hash( i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ),\n                     dot( noise_hash( i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\n                mix( dot( noise_hash( i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ),\n                     dot( noise_hash( i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\n}\n\nvoid run(vec2 uv, float scale, float detail, float roughness, float distortion, vec2 offset, out float result) {\n    vec2 p = (uv + offset) * scale;\n    float f = 0.0;\n    float w = 0.5;\n    float tot = 0.0;\n    for (int i = 0; i < 8; i++) {\n        if (float(i) >= detail) break;\n        // Domain warping: add previous noise value to position\n        float n = noise_gnoise(p + distortion * f);\n        f += w * n;\n        p *= 2.0;\n        tot += w;\n        w *= roughness;\n    }\n    // Normalize result to 0.0 - 1.0 range\n    // gnoise is approx -0.7 to 0.7, but FBM sums up.\n    // We normalize by total weight to keep it in -1..1 range roughly\n    // Then map to 0..1\n    result = 0.5 + 0.5 * (f / tot);\n}","inputs":[{"id":"scale","name":"Scale","type":"float"},{"id":"detail","name":"Detail","type":"float"},{"id":"roughness","name":"Roughness","type":"float"},{"id":"distortion","name":"Distortion","type":"float"},{"id":"offset","name":"Offset","type":"vec2"}],"outputs":[{"id":"result","name":"Result","type":"float"}],"uniforms":{"scale":{"type":"float","value":16.09,"widget":"slider","widgetConfig":{"min":0.1,"max":50}},"detail":{"type":"float","value":4,"widget":"slider","widgetConfig":{"min":1,"max":8,"step":1}},"roughness":{"type":"float","value":1,"widget":"slider","widgetConfig":{"min":0,"max":1}},"distortion":{"type":"float","value":0.15,"widget":"slider","widgetConfig":{"min":0,"max":2}},"offset":{"type":"vec2","value":[0,0],"widget":"pad"}},"outputType":"float","label":"Noise","category":"Generator","definitionId":"noise","locales":{"zh":{"Noise":"噪波","Generates high-quality Fractal Brownian Motion (FBM) noise with domain warping support.":"生成支持域扭曲的高质量分形布朗运动 (FBM) 噪波。","Scale":"缩放","Detail":"细节","Roughness":"粗糙度","Distortion":"扭曲","Offset":"偏移","Result":"结果"}},"preview":false,"resolution":{"w":512,"h":512}},"parentId":"group-1765020305834_shared_1765614416073","width":295,"height":363,"zIndex":10,"positionAbsolute":{"x":531.9616687758561,"y":4202.529041951486},"selected":false,"hidden":false},{"id":"POWER_1765019628337_93_shared_1765614416073","type":"customShader","position":{"x":1821.9349740815287,"y":1659.8512950034587},"data":{"autoType":true,"glsl":"void run(vec2 uv, float a, float b, out float res) { res = pow(abs(a), b); }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = pow(abs(a), b); }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = pow(abs(a), b); }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = pow(abs(a), b); }","inputs":[{"id":"a","name":"a","type":"float"},{"id":"b","name":"b","type":"float"}],"outputType":"float","outputs":[{"id":"res","name":"res","type":"float"}],"label":"Power","category":"Math","definitionId":"POWER","locales":{"zh":{"Power":"幂运算","Returns A raised to the power of B (A^B).":"返回 A 的 B 次幂 (A^B)。"}},"preview":false,"resolution":{"w":512,"h":512},"uniforms":{"a":{"type":"float","value":0},"b":{"type":"float","value":8,"widget":"default","widgetConfig":{"max":8}}},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":180,"zIndex":10,"positionAbsolute":{"x":1386.790853518364,"y":4373.373822947178},"selected":false,"hidden":false},{"id":"MULTIPLY_1765019648094_350_shared_1765614416073","type":"customShader","position":{"x":1389.6295157779273,"y":1735.6763274526209},"data":{"autoType":true,"glsl":"// Overloaded functions for dynamic typing\nvoid run(vec2 uv, float a, float b, out float res) { res = a * b; }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = a * b; }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = a * b; }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = a * b; }","inputs":[{"id":"a","name":"a","type":"float"},{"id":"b","name":"b","type":"float"}],"outputType":"float","outputs":[{"id":"res","name":"res","type":"float"}],"uniforms":{"a":{"type":"float","value":1},"b":{"type":"float","value":1.71,"widget":"default","widgetConfig":{"max":5}}},"label":"Multiply","category":"Math","definitionId":"MULTIPLY","locales":{"zh":{"Multiply":"乘法","Multiplies two inputs (A * B). Good for masking.":"将两个输入相乘 (A * B)。适用于遮罩。"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":180,"zIndex":10,"positionAbsolute":{"x":954.4853952147625,"y":4449.19885539634},"selected":false,"hidden":false},{"id":"1765019757661_0_xpqeb_shared_1765614416073","type":"customShader","position":{"x":1440.7719618895817,"y":70},"data":{"glsl":"void run(vec2 uv, sampler2D tex, float noise, float progress, float edge_softness, vec3 edge_color, float edge_intensity, float edge_width, float edge_power, int edge_only, int blend_mode, out vec4 result) {\n    vec4 color = texture(tex, uv);\n    float lum = dot(color.rgb, vec3(0.299, 0.587, 0.114));\n    \n    float n_val = noise;\n    \n    if (blend_mode == 1) {\n        // Multiply: Dark areas dissolve first\n        n_val = n_val * lum;\n    } else if (blend_mode == 2) {\n        // Add: Weighted mix\n        n_val = (n_val + lum) * 0.5;\n    } else if (blend_mode == 3) {\n        // Luminance Only\n        n_val = lum;\n    } else if (blend_mode == 4) {\n        // Overlay\n        float base = lum;\n        float blend = n_val;\n        n_val = base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend));\n    }\n    \n    if (n_val < progress) {\n        result = vec4(0.0);\n        return;\n    }\n    \n    float edge = 0.0;\n    if (n_val < progress + edge_width) {\n        float d = (n_val - progress) / max(0.0001, edge_width);\n        edge = 1.0 - smoothstep(1.0 - edge_softness, 1.0, d);\n        edge = pow(edge, edge_power);\n    }\n    \n    vec3 edge_final = edge_color * edge_intensity;\n    float alpha_edge = edge * color.a;\n    \n    if (edge_only == 1) {\n        result = vec4(edge_final * alpha_edge, alpha_edge);\n    } else {\n        // Mix based on alpha_edge to respect transparency\n        result = vec4(mix(color.rgb, edge_final, alpha_edge), color.a);\n    }\n}","inputs":[{"id":"tex","name":"tex","type":"sampler2D"},{"id":"noise","name":"noise","type":"float"},{"id":"progress","name":"progress","type":"float"},{"id":"edge_softness","name":"edge_softness","type":"float"},{"id":"edge_color","name":"edge_color","type":"vec3"},{"id":"edge_intensity","name":"edge_intensity","type":"float"},{"id":"edge_width","name":"edge_width","type":"float"},{"id":"edge_power","name":"edge_power","type":"float"},{"id":"edge_only","name":"edge_only","type":"int"},{"id":"blend_mode","name":"blend_mode","type":"int"}],"outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"tex":{"type":"sampler2D","value":null},"noise":{"type":"float","value":0.48},"progress":{"type":"float","value":0.41,"widget":"slider","widgetConfig":{"min":0,"max":1,"step":0.01}},"edge_softness":{"type":"float","value":1,"widget":"slider","widgetConfig":{"min":0.01,"max":1,"step":0.01}},"edge_color":{"type":"vec3","value":[0,0,0],"widget":"color"},"edge_intensity":{"type":"float","value":3.7,"widget":"slider","widgetConfig":{"min":0,"max":10,"step":0.1}},"edge_width":{"type":"float","value":0.23,"widget":"slider","widgetConfig":{"min":0.01,"max":0.5,"step":0.01}},"edge_power":{"type":"float","value":4.2,"widget":"slider","widgetConfig":{"min":0.1,"max":5,"step":0.1}},"edge_only":{"type":"int","value":0,"widget":"toggle"},"blend_mode":{"type":"int","value":0,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Noise Only","value":0},{"label":"Multiply (Noise * Image)","value":1},{"label":"Add (Noise + Image)","value":2},{"label":"Image Luminance","value":3},{"label":"Overlay","value":4}]}}},"outputType":"vec4","label":"Dissolve","category":"Effect","definitionId":"DISSOLVE","locales":{"zh":{"Dissolve":"溶解 (Dissolve)","Dissolves the texture based on a noise map":"根据噪波图溶解纹理","tex":"纹理","noise_tex":"溶解图(噪波)","progress":"进度","edge_softness":"边缘柔化","edge_color":"边缘颜色","edge_intensity":"边缘强度","edge_width":"边缘宽度","edge_power":"边缘指数","edge_only":"仅显示边缘","blend_mode":"叠加模式","result":"结果","noise":"溶解灰度图"}},"preview":false,"resolution":{"w":512,"h":512}},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":599,"zIndex":10,"positionAbsolute":{"x":1005.627841326417,"y":2783.5225279437195},"selected":false,"hidden":false},{"id":"ADD_1765019779174_816_shared_1765614416073","type":"customShader","position":{"x":3090.5008905882564,"y":325.6860035223119},"data":{"autoType":true,"glsl":"// Overloaded functions for dynamic typing\nvoid run(vec2 uv, float a, float b, out float res) { res = a + b; }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = a + b; }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = a + b; }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = a + b; }","inputs":[{"id":"a","name":"a","type":"vec4"},{"id":"b","name":"b","type":"vec4"}],"outputType":"vec4","outputs":[{"id":"res","name":"res","type":"vec4"}],"uniforms":{"a":{"type":"vec4","value":[0,0,0,0]},"b":{"type":"vec4","value":[0,0,0,0]}},"label":"Add","category":"Math","definitionId":"ADD","locales":{"zh":{"Add":"加法","Adds two inputs together (A + B). Auto-handles types.":"将两个输入相加 (A + B)。自动处理类型。"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":375,"height":220,"zIndex":10,"positionAbsolute":{"x":2655.3567700250915,"y":3039.2085314660317},"selected":false,"hidden":false},{"id":"float_input_1765019838141_140_shared_1765614416073","type":"customShader","position":{"x":851.8055087274405,"y":682.7440625747288},"data":{"glsl":"void run(vec2 uv, float value, out float result) {\n    result = value;\n}","inputs":[{"id":"value","name":"value","type":"float"}],"outputs":[{"id":"result","name":"result","type":"float"}],"uniforms":{"value":{"type":"float","value":0.51,"widget":"slider","widgetConfig":{}}},"outputType":"float","label":"Float","category":"Input","definitionId":"float_input","locales":{"zh":{"Float":"浮点数","Provides a constant float value.":"提供一个常量浮点数值。","value":"值","result":"结果"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":99,"zIndex":10,"positionAbsolute":{"x":416.66138816427576,"y":3396.2665905184485},"selected":false,"hidden":false},{"id":"REMOVE_BLACK_1765020008076_501_shared_1765614416073","type":"customShader","position":{"x":516.0560522856944,"y":589.6216111584538},"data":{"glsl":"void run(vec2 uv, vec4 input_col, int mode, float low, float high, int unpremult, out vec4 result) {\n    float val = 0.0;\n    if (mode == 0) {\n        // Max RGB\n        val = max(input_col.r, max(input_col.g, input_col.b));\n    } else {\n        // Luminance\n        val = dot(input_col.rgb, vec3(0.299, 0.587, 0.114));\n    }\n    \n    // Calculate Alpha using smoothstep for better control\n    float alpha = smoothstep(low, high, val);\n    \n    vec3 out_rgb = input_col.rgb;\n    \n    // Unpremultiply: Boost RGB to recover original color intensity for straight alpha blending\n    if (unpremult == 1 && alpha > 0.0001) {\n        // We use the original 'val' as the divisor because that represents the original 'alpha' assumption\n        // But using the new 'alpha' ensures we don't boost clipped regions incorrectly.\n        // However, standard unpremult uses the alpha channel.\n        out_rgb = input_col.rgb / max(0.0001, val); \n        // Note: dividing by 'val' (original brightness) is mathematically closer to recovering the color \n        // before it was multiplied by black.\n        \n        // Clamp to avoid HDR artifacts if needed\n        out_rgb = clamp(out_rgb, 0.0, 1.0);\n    }\n    \n    result = vec4(out_rgb, alpha);\n}","outputType":"vec4","inputs":[{"id":"input_col","name":"Input","type":"vec4"},{"id":"mode","name":"Mode","type":"int"},{"id":"low","name":"Low Clip","type":"float"},{"id":"high","name":"High Clip","type":"float"},{"id":"unpremult","name":"Unpremultiply","type":"int"}],"outputs":[{"id":"result","name":"Output","type":"vec4"}],"uniforms":{"mode":{"type":"int","value":0,"widget":"enum","widgetConfig":{"enumOptions":[{"label":"Max RGB","value":0},{"label":"Luminance","value":1}]}},"low":{"type":"float","value":0,"widget":"slider","widgetConfig":{"min":0,"max":1}},"high":{"type":"float","value":1,"widget":"slider","widgetConfig":{"min":0,"max":2}},"unpremult":{"type":"int","value":0,"widget":"toggle"}},"label":"Remove Black","category":"Filter","definitionId":"REMOVE_BLACK","locales":{"zh":{"Remove Black":"去黑底 (Remove Black)","Input":"输入","Mode":"模式","Low Clip":"黑场阈值","High Clip":"白场阈值","Unpremultiply":"色彩还原(去预乘)","Output":"输出"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":284,"height":311,"zIndex":10,"positionAbsolute":{"x":80.91193172252963,"y":3303.1441391021735},"selected":false,"hidden":false},{"id":"group-1765020305834_shared_1765614416073","type":"group","position":{"x":-435.14412056316473,"y":2713.5225279437195},"data":{"label":"Combustion","description":"","preview":false,"resolution":{"w":512,"h":512}},"width":4657,"height":2387,"zIndex":-10,"style":{"width":4657,"height":2387},"positionAbsolute":{"x":-435.14412056316473,"y":2713.5225279437195},"selected":false,"hidden":false,"resizing":false},{"id":"FLUID_SIM_1765043540050_320_shared_1765614416073","type":"fluidSimulationNode","position":{"x":2992.348456598259,"y":1198.380756265896},"data":{"glsl":"void run(vec2 uv, sampler2D image, sampler2D flow, out vec4 out_image, out vec4 out_flow) { \n    out_image = texture(image, uv);\n    out_flow = texture(flow, uv);\n}","inputs":[{"id":"image","name":"Image Input","type":"sampler2D"},{"id":"flow","name":"Flow Input","type":"sampler2D"}],"outputs":[{"id":"image","name":"Image","type":"vec4"},{"id":"flow","name":"Flow","type":"vec4"}],"uniforms":{"image":{"type":"sampler2D","value":"dynamic://FLUID_SIM_1765043540050_320_shared_1765614416073"},"flow":{"type":"sampler2D","value":"dynamic://FLUID_SIM_1765043540050_320_shared_1765614416073"}},"outputType":"vec4","label":"Fluid Sim","category":"Generator","definitionId":"FLUID_SIM","locales":{"zh":{"Fluid Sim":"流体模拟","Real-time fluid simulation":"实时流体模拟"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root","settings":{"viscosity":0.002,"fade":0.116,"dt":0.016,"speed":0.6,"interactionMode":"field","emitters":[],"forceFields":[{"id":"p4u3v8h3g","x":239.3063820328267,"y":226.6938490362326,"force":0,"spin":0,"windForce":0.5,"windAngle":30,"pulse":0,"turbulence":1.8,"radius":0.22}],"showObstacles":false,"showFieldIcons":true,"pressureIterations":50,"splatRadius":0.014,"splatForce":5,"splatColor":"#ffffff","densityAmount":0.2,"emissionSpeed":0.2,"gravity":0}},"parentId":"group-1765020305834_shared_1765614416073","width":302,"height":343,"zIndex":10,"positionAbsolute":{"x":2557.2043360350945,"y":3911.903284209616},"selected":false,"hidden":false},{"id":"ADD_1765043642771_157_shared_1765614416073","type":"customShader","position":{"x":3602.0947806380536,"y":673.7642632481482},"data":{"autoType":true,"glsl":"// Overloaded functions for dynamic typing\nvoid run(vec2 uv, float a, float b, out float res) { res = a + b; }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = a + b; }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = a + b; }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = a + b; }","inputs":[{"id":"a","name":"a","type":"vec4"},{"id":"b","name":"b","type":"vec4"}],"outputType":"vec4","outputs":[{"id":"res","name":"res","type":"vec4"}],"uniforms":{"a":{"type":"vec4","value":[0,0,0,0]},"b":{"type":"vec4","value":[0,0,0,0]}},"label":"Add","category":"Math","definitionId":"ADD","locales":{"zh":{"Add":"加法","Adds two inputs together (A + B). Auto-handles types.":"将两个输入相加 (A + B)。自动处理类型。"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":375,"height":220,"zIndex":10,"positionAbsolute":{"x":3166.950660074889,"y":3387.2867911918675},"selected":false,"hidden":false},{"id":"ColorMapping_1765044193530_108_shared_1765614416073","type":"customShader","position":{"x":3391.747975226269,"y":1207.4683101774644},"data":{"glsl":"\nvoid run(vec2 uv, float u, sampler2D color,out vec4 outcolor) {\n  vec4 color2= texture2D(color,vec2(u,0.5));\noutcolor= color2;\n\n}","inputs":[{"id":"u","name":"in","type":"float"},{"id":"color","name":"color","type":"sampler2D"}],"outputs":[{"id":"outcolor","name":"outcolor","type":"vec4"}],"uniforms":{"u":{"type":"float","value":0,"widget":"hidden","widgetConfig":{}},"color":{"type":"sampler2D","value":null,"widget":"gradient","widgetConfig":{"gradientStops":[{"pos":0.3130257419808201,"color":"#ff5d05"},{"pos":0.6702988801929154,"color":"#fbff00"},{"pos":0.9098791684239398,"color":"#ffffff"},{"pos":0.14568607390873015,"color":"#52616f"},{"pos":0.006147435102513228,"color":"#000000"}],"alphaStops":[{"pos":1,"value":1},{"pos":0.4214671107822477,"value":1},{"pos":0.08748501570767196,"value":0.54}]}}},"outputType":"vec4","label":"ColorMapping","category":"Color","definitionId":"ColorMapping","locales":{"zh":{"in":"灰度图","color":"渐变颜色","outcolor":"输出","ColorMapping":"颜色映射"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":205,"zIndex":10,"positionAbsolute":{"x":2956.6038546631044,"y":3920.990838121184},"selected":false,"hidden":false},{"id":"TIME_1765044513785_143_shared_1765614416073","type":"customShader","position":{"x":31.682453729719043,"y":1299.5378695488885},"data":{"glsl":"void run(vec2 uv, float speed, out float time) {\n    time = u_time * speed;\n}","inputs":[{"id":"speed","name":"Speed","type":"float","default":1}],"outputs":[{"id":"time","name":"Time","type":"float"}],"outputType":"float","uniforms":{"speed":{"type":"float","value":0.12}},"label":"Time","category":"Generator","definitionId":"TIME","locales":{"zh":{"Time":"时间","Speed":"速度","Outputs the current time scaled by speed.":"输出按速度缩放的当前时间。"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":107,"zIndex":10,"positionAbsolute":{"x":-403.4616668334457,"y":4013.060397492608},"selected":false,"hidden":false},{"id":"MOD_1765044556353_474_shared_1765614416073","type":"customShader","position":{"x":321.80026469518157,"y":1050.105512508711},"data":{"autoType":true,"glsl":"void run(vec2 uv, float a, float b, out float res) { res = mod(a, b); }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res) { res = mod(a, b); }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res) { res = mod(a, b); }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res) { res = mod(a, b); }","inputs":[{"id":"a","name":"a","type":"float"},{"id":"b","name":"b","type":"float"}],"uniforms":{"b":{"type":"float","value":0.53},"a":{"type":"float","value":0}},"outputType":"float","outputs":[{"id":"res","name":"res","type":"float"}],"label":"Mod","category":"Math","definitionId":"MOD","locales":{"zh":{"Mod":"取模","Compute value of one parameter modulo another.":"计算参数 A 对参数 B 取模的值。","A":"值","B":"模数"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":180,"zIndex":10,"positionAbsolute":{"x":-113.34385586798317,"y":3763.6280404524305},"selected":false,"hidden":false},{"id":"ADD_1765044596087_148_shared_1765614416073","type":"customShader","position":{"x":579.0691239957938,"y":1247.4374355623063},"data":{"autoType":true,"glsl":"// Overloaded functions for dynamic typing\nvoid run(vec2 uv, float a, float b, out float res) { res = a + b; }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = a + b; }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = a + b; }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = a + b; }","inputs":[{"id":"a","name":"a","type":"float"},{"id":"b","name":"b","type":"float"}],"outputType":"float","outputs":[{"id":"res","name":"res","type":"float"}],"uniforms":{"a":{"type":"float","value":0},"b":{"type":"float","value":0.31}},"label":"Add","category":"Math","definitionId":"ADD","locales":{"zh":{"Add":"加法","Adds two inputs together (A + B). Auto-handles types.":"将两个输入相加 (A + B)。自动处理类型。"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":180,"zIndex":10,"positionAbsolute":{"x":143.92500343262907,"y":3960.959963506026},"selected":false,"hidden":false,"dragging":false},{"id":"MULTIPLY_1765046812141_809_shared_1765614416073","type":"customShader","position":{"x":2304.1391068438593,"y":1512.6429510283597},"data":{"autoType":true,"glsl":"// Overloaded functions for dynamic typing\nvoid run(vec2 uv, float a, float b, out float res) { res = a * b; }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = a * b; }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = a * b; }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = a * b; }","inputs":[{"id":"a","name":"a","type":"vec4"},{"id":"b","name":"b","type":"vec4"}],"outputType":"vec4","outputs":[{"id":"res","name":"res","type":"vec4"}],"uniforms":{"a":{"type":"vec4","value":[1,1,1,1]},"b":{"type":"vec4","value":[1,1,1,1]}},"label":"Multiply","category":"Math","definitionId":"MULTIPLY","locales":{"zh":{"Multiply":"乘法","Multiplies two inputs (A * B). Good for masking.":"将两个输入相乘 (A * B)。适用于遮罩。"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":375,"height":220,"zIndex":10,"positionAbsolute":{"x":1868.9949862806945,"y":4226.16547897208},"selected":false,"hidden":false},{"id":"VORONOI_1765046819059_777_shared_1765614416073","type":"customShader","position":{"x":2213.1961128532353,"y":1808.9655397811425},"data":{"glsl":"vec2 voronoi_hash( vec2 p ) {\n    p = vec2( dot(p,vec2(127.1,311.7)), dot(p,vec2(269.5,183.3)) );\n    return fract(sin(p)*43758.5453);\n}\n\nvoid run(vec2 uv, float scale, float randomness, out float dist, out float id) {\n    vec2 n = floor(uv * scale);\n    vec2 f = fract(uv * scale);\n\n    float m_dist = 8.0;\n    vec2 m_point = vec2(0.0);\n    vec2 m_neighbor = vec2(0.0);\n\n    // First pass: find the closest point\n    for( int j=-1; j<=1; j++ ) {\n        for( int i=-1; i<=1; i++ ) {\n            vec2 g = vec2(float(i),float(j));\n            vec2 o = voronoi_hash( n + g );\n            o = 0.5 + 0.5*sin( 6.2831*o + randomness ); // Animate or randomize\n            vec2 r = g + o - f;\n            float d = length(r);\n\n            if( d < m_dist ) {\n                m_dist = d;\n                m_point = o;\n                m_neighbor = g;\n            }\n        }\n    }\n    \n    dist = m_dist;\n    // Generate a random ID based on the cell position\n    id = voronoi_hash(n + m_neighbor).x;\n}","outputType":"float","inputs":[{"id":"scale","name":"Scale","type":"float"},{"id":"randomness","name":"Randomness","type":"float"}],"outputs":[{"id":"dist","name":"Distance","type":"float"},{"id":"id","name":"ID","type":"float"}],"uniforms":{"scale":{"type":"float","value":2.97,"widget":"slider","widgetConfig":{"min":1,"max":50}},"randomness":{"type":"float","value":1,"widget":"slider","widgetConfig":{"min":0,"max":10}}},"label":"Voronoi","category":"Generator","definitionId":"VORONOI","locales":{"zh":{"Voronoi":"细胞噪波 (Voronoi)","Scale":"缩放","Randomness":"随机性","Distance":"距离场","ID":"细胞ID"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":283,"height":163,"zIndex":10,"positionAbsolute":{"x":1778.0519922900705,"y":4522.488067724862},"selected":false,"hidden":false},{"id":"POWER_1765047389370_316_shared_1765614416073","type":"customShader","position":{"x":3066.6780244802712,"y":781.6276481551386},"data":{"autoType":true,"glsl":"void run(vec2 uv, float a, float b, out float res) { res = pow(abs(a), b); }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = pow(abs(a), b); }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = pow(abs(a), b); }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = pow(abs(a), b); }","inputs":[{"id":"a","name":"a","type":"vec4"},{"id":"b","name":"b","type":"vec4"}],"outputType":"vec4","outputs":[{"id":"res","name":"res","type":"vec4"}],"label":"Power","category":"Math","definitionId":"POWER","locales":{"zh":{"Power":"幂运算","Returns A raised to the power of B (A^B).":"返回 A 的 B 次幂 (A^B)。"}},"preview":false,"resolution":{"w":512,"h":512},"uniforms":{"a":{"type":"vec4","value":[0,0,0,0]},"b":{"type":"vec4","value":[0,0,0,0]}},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":375,"height":220,"zIndex":10,"positionAbsolute":{"x":2631.5339039171067,"y":3495.150176098858},"selected":false,"hidden":false},{"id":"float_input_1765047397083_280_shared_1765614416073","type":"customShader","position":{"x":2573.5849496137434,"y":1112.3739115329317},"data":{"glsl":"void run(vec2 uv, float value, out float result) {\n    result = value;\n}","inputs":[{"id":"value","name":"value","type":"float"}],"outputs":[{"id":"result","name":"result","type":"float"}],"uniforms":{"value":{"type":"float","value":1.44,"widget":"slider","widgetConfig":{"max":6}}},"outputType":"float","label":"Float","category":"Input","definitionId":"float_input","locales":{"zh":{"Float":"浮点数","Provides a constant float value.":"提供一个常量浮点数值。","value":"值","result":"结果"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":282,"height":107,"zIndex":10,"positionAbsolute":{"x":2138.440829050579,"y":3825.8964394766513},"selected":false,"hidden":false},{"id":"GAUSSIAN_BLUR_1765048263809_947_shared_1765614416073","type":"customShader","position":{"x":2625.2527896152365,"y":675.5053248407205},"data":{"glsl":"void run(vec2 uv, sampler2D tex, int mode, float strength, int samples, vec2 center, float angle, out vec4 result) {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n    \n    int count = samples;\n    if(count > 64) count = 1000;\n    if(count < 2) count = 2;\n    \n    float rad = radians(angle);\n    vec2 dir = vec2(cos(rad), sin(rad));\n\n    for (int i = 0; i < 1000; i++) {\n        if (i >= count) break;\n        \n        float t = float(i) / float(count - 1); \n        float t_centered = t * 2.0 - 1.0;\n        \n        vec2 coord = uv;\n        \n        if (mode == 0) { \n            float theta = float(i) / float(count) * 6.28318; \n            float r = sqrt(float(i) / float(count)) * strength * 0.1;\n            vec2 offset = vec2(sin(theta), cos(theta)) * r;\n            coord += offset;\n        } else if (mode == 1) { \n            coord += dir * t_centered * strength * 0.1;\n        } else if (mode == 2) { \n            vec2 rel = uv - center;\n            float phi = t_centered * strength * 0.2;\n            float s = sin(phi);\n            float c = cos(phi);\n            vec2 rotated = vec2(rel.x * c - rel.y * s, rel.x * s + rel.y * c);\n            coord = center + rotated;\n        } else if (mode == 3) { \n            vec2 rel = uv - center;\n            float scale = 1.0 + (t_centered * strength * 0.2);\n            coord = center + rel * scale;\n        }\n        \n        color += texture2D(tex, coord);\n        total += 1.0;\n    }\n    \n    if (total == 0.0) {\n        result = vec4(0.0);\n    } else {\n        result = color / total;\n    }\n}","inputs":[{"id":"tex","name":"tex","type":"sampler2D"},{"id":"mode","name":"mode","type":"int"},{"id":"strength","name":"strength","type":"float"},{"id":"samples","name":"samples","type":"int"},{"id":"center","name":"center","type":"vec2"},{"id":"angle","name":"angle","type":"float"}],"outputs":[{"id":"result","name":"result","type":"vec4"}],"uniforms":{"tex":{"type":"sampler2D","value":null},"mode":{"type":"int","value":3,"widgetConfig":{"min":0,"max":3,"enumOptions":[{"label":"Gaussian","value":0},{"label":"Direction","value":1},{"label":"Rotation blur","value":2},{"label":"Zoom blur","value":3}]},"widget":"enum"},"strength":{"type":"float","value":1,"widgetConfig":{"min":0,"max":1}},"samples":{"type":"int","value":1000,"widgetConfig":{"min":2,"max":1000},"widget":"default"},"center":{"type":"vec2","value":[0.5,0.5],"widget":"pad","widgetConfig":{"minX":0,"minY":0}},"angle":{"type":"float","value":0,"widgetConfig":{"min":0,"max":360,"visibleIf":{"uniform":"mode","value":1}}}},"outputType":"vec4","label":"Blur","category":"Filter","definitionId":"GAUSSIAN_BLUR","locales":{"zh":{"Advanced Blur":"模糊","Multi-mode blur: Gaussian, Directional, Radial, and Zoom.":"多模式模糊：高斯、定向、径向和缩放。","mode":"模式","strength":"强度","samples":"采样数","center":"中心","angle":"角度"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":302,"height":362,"zIndex":10,"positionAbsolute":{"x":2190.1086690520715,"y":3389.0278527844403},"selected":false,"hidden":false},{"id":"ADD_1765048284643_6_shared_1765614416073","type":"customShader","position":{"x":2568.9422951539254,"y":1375.659220465739},"data":{"autoType":true,"glsl":"// Overloaded functions for dynamic typing\nvoid run(vec2 uv, float a, float b, out float res) { res = a + b; }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = a + b; }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = a + b; }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = a + b; }","inputs":[{"id":"a","name":"a","type":"vec4"},{"id":"b","name":"b","type":"vec4"}],"outputType":"vec4","outputs":[{"id":"res","name":"res","type":"vec4"}],"uniforms":{"a":{"type":"vec4","value":[0,0,0,0]},"b":{"type":"vec4","value":[0,0,0,0]}},"label":"Add","category":"Math","definitionId":"ADD","locales":{"zh":{"Add":"加法","Adds two inputs together (A + B). Auto-handles types.":"将两个输入相加 (A + B)。自动处理类型。"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":375,"height":220,"zIndex":10,"positionAbsolute":{"x":2133.798174590761,"y":4089.1817484094586},"selected":false,"hidden":false},{"id":"ADD_1765292379203_939_shared_1765614416073","type":"customShader","position":{"x":4196.102544506756,"y":905.2666932613735},"data":{"autoType":true,"glsl":"// Overloaded functions for dynamic typing\nvoid run(vec2 uv, float a, float b, out float res) { res = a + b; }\nvoid run(vec2 uv, vec2 a, vec2 b, out vec2 res)   { res = a + b; }\nvoid run(vec2 uv, vec3 a, vec3 b, out vec3 res)   { res = a + b; }\nvoid run(vec2 uv, vec4 a, vec4 b, out vec4 res)   { res = a + b; }","inputs":[{"id":"a","name":"a","type":"vec4"},{"id":"b","name":"b","type":"vec4"}],"outputType":"vec4","outputs":[{"id":"res","name":"res","type":"vec4"}],"uniforms":{"a":{"type":"vec4","value":[0,0,0,0]},"b":{"type":"vec4","value":[0,0,0,0]}},"label":"Add","category":"Math","definitionId":"ADD","locales":{"zh":{"Add":"加法","Adds two inputs together (A + B). Auto-handles types.":"将两个输入相加 (A + B)。自动处理类型。"}},"preview":true,"resolution":{"w":512,"h":512},"scopeId":"root"},"parentId":"group-1765020305834_shared_1765614416073","width":375,"height":220,"zIndex":10,"positionAbsolute":{"x":3760.9584239435917,"y":3618.789221205093},"selected":false,"hidden":false},{"id":"1765615470576_0_o16fr","type":"particleSystem","position":{"x":3163.1185680811477,"y":1544.5873445027487},"data":{"glsl":"void run(vec2 uv, sampler2D tex, out vec4 result) {\n    result = texture(tex, uv);\n}","outputType":"vec4","inputs":[{"id":"tex","name":"Texture","type":"sampler2D"}],"outputs":[{"id":"output","name":"Particles","type":"vec4"}],"uniforms":{"tex":{"type":"sampler2D","value":"dynamic://1765615470576_0_o16fr"}},"settings":{"camera":{"r":1.2077294685990339,"theta":0,"phi":1.5707963267948966,"target":[0,0,0],"isPerspective":true},"modules":[{"id":"main","enabled":true,"properties":{"duration":0.2,"looping":true,"startDelay":0,"startLifetime":{"mode":"Random","constant":5,"constantMin":0.35,"constantMax":0.6},"startSpeed":{"mode":"Constant","constant":0,"constantMin":1,"constantMax":5},"startSize":{"mode":"Random","constant":0.05,"constantMin":0.001,"constantMax":0.007},"startRotation":{"mode":"Constant","constant":0,"constantMin":0,"constantMax":360},"gravityModifier":{"mode":"Constant","constant":0,"constantMin":0,"constantMax":1},"simulationSpace":"Local","maxParticles":1000000,"autoRandomSeed":true,"seed":0}},{"id":"emission","enabled":true,"properties":{"rateOverTime":100000,"rateOverDistance":0,"bursts":[]}},{"id":"shape","enabled":true,"properties":{"shapeType":"Cone","angle":25,"radius":1,"radiusThickness":1,"arc":360,"boxX":1,"boxY":1,"boxZ":1,"positionX":0,"positionY":0,"positionZ":0,"rotationX":0,"rotationY":0,"rotationZ":0,"scaleX":1,"scaleY":1,"scaleZ":1,"randomizeDirection":0,"spherizeDirection":0,"emissionThreshold":0,"image":null}},{"id":"limitVelocity","enabled":false,"properties":{"dampen":0,"drag":0}},{"id":"velocity","enabled":true,"properties":{"linearX":0.15,"linearY":0.35,"linearZ":0,"space":"Local","orbitalX":0,"orbitalY":0,"orbitalZ":0,"offsetX":0,"offsetY":0,"offsetZ":0,"radial":0,"speedModifier":1}},{"id":"noise","enabled":true,"properties":{"strength":0.2,"frequency":17.8,"scrollSpeed":0.5,"damping":true,"octaves":1,"quality":"High","positionAmount":1,"rotationAmount":0,"sizeAmount":0}},{"id":"color","enabled":true,"properties":{"color":{"gradientStops":[{"pos":0,"color":"#ffffff"},{"pos":0.6443691092780681,"color":"#ff5900"}],"alphaStops":[{"pos":0,"value":1}]}}},{"id":"size","enabled":true,"properties":{"separateAxes":false,"size":[{"x":0.15309019346494931,"y":1},{"x":1,"y":0}]}},{"id":"rotation","enabled":false,"properties":{"separateAxes":false,"angularVelocity":{"mode":"Constant","constant":45,"constantMin":0,"constantMax":360}}},{"id":"renderer","enabled":true,"properties":{"renderMode":"Stretched Billboard","renderAlignment":"View","material":"Circle","blending":"Additive","texture":null,"lengthScale":0.7,"speedScale":0.1,"cameraScale":0,"sortingFudge":0,"minParticleSize":0,"maxParticleSize":1}}]},"label":"Particle System","category":"Generator","definitionId":"PARTICLE_SYSTEM","preview":false,"resolution":{"w":512,"h":512}},"parentId":"group-1765020305834_shared_1765614416073","width":322,"height":760,"zIndex":10,"positionAbsolute":{"x":2727.974447517983,"y":4258.109872446468},"selected":false,"dragging":false,"hidden":false},{"id":"BAKE_NODE_1765615514087_846","type":"bakeNode","position":{"x":40,"y":70},"zIndex":10,"data":{"glsl":"void run(vec2 uv, sampler2D image, out vec4 preview) { preview = texture(image, uv); }","inputs":[{"id":"image","name":"Image","type":"sampler2D"}],"outputs":[{"id":"preview","name":"Preview","type":"vec4"}],"outputType":"vec4","parameters":{},"label":"Bake / Export","category":"Output","definitionId":"BAKE_NODE","preview":false,"resolution":{"w":512,"h":512},"uniforms":{"image":{"type":"sampler2D","value":null}},"scopeId":"root","settings":{"width":512,"height":512,"fps":10,"duration":2,"columns":4,"rows":4,"mode":"video","triggerValue":0}},"width":322,"height":660,"positionAbsolute":{"x":5162.4949050442165,"y":3411.3797551515972},"hidden":false,"selected":false,"dragging":false,"parentId":"group-1765624767854"},{"id":"group-1765624767854","type":"group","position":{"x":5122.4949050442165,"y":3341.3797551515972},"style":{"width":402,"height":688},"data":{"label":"Back Export","description":"","preview":false,"resolution":{"w":512,"h":512}},"selected":false,"zIndex":-10,"width":402,"height":688,"positionAbsolute":{"x":5122.4949050442165,"y":3341.3797551515972},"dragging":false,"hidden":false},{"id":"REGISTER_NODE_1768663928842_526","type":"registerNode","position":{"x":576.3993460303425,"y":1447.4695705821173},"zIndex":10,"data":{"glsl":"void run(vec2 uv, sampler2D image, out vec4 result) { result = texture(image, uv); }","inputs":[{"id":"image","name":"Image","type":"sampler2D"}],"outputs":[{"id":"result","name":"Result","type":"vec4"}],"outputType":"vec4","label":"Register","category":"Output","description":"Registers an input texture under a variable name for reuse.","definitionId":"REGISTER_NODE","locales":{"zh":{"Register":"注册","Registers an input texture under a variable name for reuse.":"将输入纹理注册为变量名以便复用。","Image":"图像","Result":"结果"}},"preview":false,"resolution":{"w":512,"h":512},"uniforms":{"image":{"type":"sampler2D","value":null}},"scopeId":"root","settings":{"name":"startTime"}},"width":290,"height":161,"hidden":false,"selected":false,"positionAbsolute":{"x":141.25522546717775,"y":4160.992098525837},"dragging":false,"parentId":"group-1765020305834_shared_1765614416073"},{"id":"GET_NODE_1768664406691_902","type":"getNode","position":{"x":4757.342697052878,"y":3887.362272789922},"zIndex":10,"data":{"glsl":"void run(vec2 uv, sampler2D tex, out vec4 result) { result = texture(tex, uv); }","inputs":[{"id":"tex","name":"Texture","type":"sampler2D"}],"outputs":[{"id":"result","name":"Output","type":"vec4"}],"uniforms":{"tex":{"type":"sampler2D","value":"dynamic://register_startTime","widget":"image"}},"outputType":"vec4","label":"Get","category":"Utility","description":"Fetches a registered texture by variable name.","definitionId":"GET_NODE","locales":{"zh":{"Get":"获取","Fetches a registered texture by variable name.":"通过变量名获取已注册的纹理。","Texture":"纹理","Output":"输出"}},"preview":false,"resolution":{"w":512,"h":512},"scopeId":"root","settings":{"selected":"startTime"}},"width":258,"height":114,"selected":false,"positionAbsolute":{"x":4757.342697052878,"y":3887.362272789922},"dragging":false}],"edges":[{"id":"reactflow__edge-IMAGE_1765015207882_792result-ADVANCED_BLOOM_1765015210347_814tex","source":"IMAGE_1765015207882_792","target":"ADVANCED_BLOOM_1765015210347_814","sourceHandle":"result","targetHandle":"tex","type":"smart","animated":false},{"id":"reactflow__edge-1765015272143_0_ayopzresult-rgb_offset_1765015279235_245image","source":"1765015272143_0_ayopz","target":"rgb_offset_1765015279235_245","sourceHandle":"result","targetHandle":"image","type":"smart","animated":false},{"id":"reactflow__edge-1765612506431_0_x3idbresult-REMOVE_BLACK_1765613607596_907input_col","source":"1765612506431_0_x3idb","target":"REMOVE_BLACK_1765613607596_907","sourceHandle":"result","targetHandle":"input_col","type":"smart","animated":false},{"id":"reactflow__edge-REMOVE_BLACK_1765613607596_907result-BEVEL_EMBOSS_1765613618596_52inputTex","source":"REMOVE_BLACK_1765613607596_907","target":"BEVEL_EMBOSS_1765613618596_52","sourceHandle":"result","targetHandle":"inputTex","type":"smart","animated":false},{"id":"reactflow__edge-BEVEL_EMBOSS_1765613618596_52result-HEIGHT_TO_NORMAL_1765613636115_348tex","source":"BEVEL_EMBOSS_1765613618596_52","target":"HEIGHT_TO_NORMAL_1765613636115_348","sourceHandle":"result","targetHandle":"tex","type":"smart","animated":false},{"id":"reactflow__edge-HEIGHT_TO_NORMAL_1765613636115_348result-ADVANCED_DISPERSION_1765612450679_616normalMap","source":"HEIGHT_TO_NORMAL_1765613636115_348","target":"ADVANCED_DISPERSION_1765612450679_616","sourceHandle":"result","targetHandle":"normalMap","type":"smart","animated":false},{"id":"reactflow__edge-rgb_offset_1765015279235_245output-ADVANCED_DISPERSION_1765612450679_616tex","source":"rgb_offset_1765015279235_245","target":"ADVANCED_DISPERSION_1765612450679_616","sourceHandle":"output","targetHandle":"tex","type":"smart","animated":false},{"id":"e_noise_1765019330188_466_DISSOLVE_1765019321740_485_1765614416073","source":"noise_1765019330188_466_shared_1765614416073","target":"DISSOLVE_1765019321740_485_shared_1765614416073","sourceHandle":"result","targetHandle":"noise","type":"smart","animated":false},{"id":"e_DISSOLVE_1765019321740_485_MULTIPLY_1765019591794_111_1765614416073","source":"DISSOLVE_1765019321740_485_shared_1765614416073","target":"MULTIPLY_1765019591794_111_shared_1765614416073","sourceHandle":"result","targetHandle":"a","type":"smart","animated":false},{"id":"e_1765019597623_0_w5291_MULTIPLY_1765019648094_350_1765614416073","source":"1765019597623_0_w5291_shared_1765614416073","target":"MULTIPLY_1765019648094_350_shared_1765614416073","sourceHandle":"result","targetHandle":"a","type":"smart","animated":false},{"id":"e_MULTIPLY_1765019648094_350_POWER_1765019628337_93_1765614416073","source":"MULTIPLY_1765019648094_350_shared_1765614416073","target":"POWER_1765019628337_93_shared_1765614416073","sourceHandle":"res","targetHandle":"a","type":"smart","animated":false},{"id":"e_POWER_1765019628337_93_MULTIPLY_1765019591794_111_1765614416073","source":"POWER_1765019628337_93_shared_1765614416073","target":"MULTIPLY_1765019591794_111_shared_1765614416073","sourceHandle":"res","targetHandle":"b","type":"smart","animated":false},{"id":"e_noise_1765019330188_466_1765019757661_0_xpqeb_1765614416073","source":"noise_1765019330188_466_shared_1765614416073","target":"1765019757661_0_xpqeb_shared_1765614416073","sourceHandle":"result","targetHandle":"noise","type":"smart","animated":false},{"id":"e_1765019757661_0_xpqeb_ADD_1765019779174_816_1765614416073","source":"1765019757661_0_xpqeb_shared_1765614416073","target":"ADD_1765019779174_816_shared_1765614416073","sourceHandle":"result","targetHandle":"a","type":"smart","animated":false},{"id":"e_float_input_1765019838141_140_1765019757661_0_xpqeb_1765614416073","source":"float_input_1765019838141_140_shared_1765614416073","target":"1765019757661_0_xpqeb_shared_1765614416073","sourceHandle":"result","targetHandle":"progress","type":"smart","animated":false},{"id":"e_float_input_1765019838141_140_DISSOLVE_1765019321740_485_1765614416073","source":"float_input_1765019838141_140_shared_1765614416073","target":"DISSOLVE_1765019321740_485_shared_1765614416073","sourceHandle":"result","targetHandle":"progress","type":"smart","animated":false},{"id":"e_IMAGE_1765019129292_492_REMOVE_BLACK_1765020008076_501_1765614416073","source":"IMAGE_1765019129292_492_shared_1765614416073","target":"REMOVE_BLACK_1765020008076_501_shared_1765614416073","sourceHandle":"result","targetHandle":"input_col","type":"smart","animated":false},{"id":"e_REMOVE_BLACK_1765020008076_501_1765019757661_0_xpqeb_1765614416073","source":"REMOVE_BLACK_1765020008076_501_shared_1765614416073","target":"1765019757661_0_xpqeb_shared_1765614416073","sourceHandle":"result","targetHandle":"tex","type":"smart","animated":false},{"id":"e_REMOVE_BLACK_1765020008076_501_DISSOLVE_1765019321740_485_1765614416073","source":"REMOVE_BLACK_1765020008076_501_shared_1765614416073","target":"DISSOLVE_1765019321740_485_shared_1765614416073","sourceHandle":"result","targetHandle":"tex","type":"smart","animated":false},{"id":"e_ADD_1765019779174_816_ADD_1765043642771_157_1765614416073","source":"ADD_1765019779174_816_shared_1765614416073","target":"ADD_1765043642771_157_shared_1765614416073","sourceHandle":"res","targetHandle":"a","type":"smart","animated":false},{"id":"e_ColorMapping_1765044193530_108_ADD_1765043642771_157_1765614416073","source":"ColorMapping_1765044193530_108_shared_1765614416073","target":"ADD_1765043642771_157_shared_1765614416073","sourceHandle":"outcolor","targetHandle":"b","type":"smart","animated":false},{"id":"e_TIME_1765044513785_143_MOD_1765044556353_474_1765614416073","source":"TIME_1765044513785_143_shared_1765614416073","target":"MOD_1765044556353_474_shared_1765614416073","sourceHandle":"time","targetHandle":"a","type":"smart","animated":false},{"id":"e_ADD_1765044596087_148_float_input_1765019838141_140_1765614416073","source":"ADD_1765044596087_148_shared_1765614416073","target":"float_input_1765019838141_140_shared_1765614416073","sourceHandle":"res","targetHandle":"value","type":"smart","animated":false},{"id":"e_MULTIPLY_1765019591794_111_MULTIPLY_1765046812141_809_1765614416073","source":"MULTIPLY_1765019591794_111_shared_1765614416073","target":"MULTIPLY_1765046812141_809_shared_1765614416073","sourceHandle":"res","targetHandle":"a","type":"smart","animated":false},{"id":"e_VORONOI_1765046819059_777_MULTIPLY_1765046812141_809_1765614416073","source":"VORONOI_1765046819059_777_shared_1765614416073","target":"MULTIPLY_1765046812141_809_shared_1765614416073","sourceHandle":"dist","targetHandle":"b","type":"smart","animated":false},{"id":"e_MULTIPLY_1765019591794_111_FLUID_SIM_1765043540050_320_1765614416073","source":"MULTIPLY_1765019591794_111_shared_1765614416073","target":"FLUID_SIM_1765043540050_320_shared_1765614416073","sourceHandle":"res","targetHandle":"input_emission","type":"smart","animated":false},{"id":"e_FLUID_SIM_1765043540050_320_ColorMapping_1765044193530_108_1765614416073","source":"FLUID_SIM_1765043540050_320_shared_1765614416073","target":"ColorMapping_1765044193530_108_shared_1765614416073","sourceHandle":"flow","targetHandle":"u","type":"smart","animated":false},{"id":"e_MULTIPLY_1765019591794_111_ADVANCED_BLOOM_1765019562565_300_1765614416073","source":"MULTIPLY_1765019591794_111_shared_1765614416073","target":"ADVANCED_BLOOM_1765019562565_300_shared_1765614416073","sourceHandle":"res","targetHandle":"tex","type":"smart","animated":false},{"id":"e_float_input_1765047397083_280_POWER_1765047389370_316_1765614416073","source":"float_input_1765047397083_280_shared_1765614416073","target":"POWER_1765047389370_316_shared_1765614416073","sourceHandle":"result","targetHandle":"b","type":"smart","animated":false},{"id":"e_POWER_1765047389370_316_ADD_1765019779174_816_1765614416073","source":"POWER_1765047389370_316_shared_1765614416073","target":"ADD_1765019779174_816_shared_1765614416073","sourceHandle":"res","targetHandle":"b","type":"smart","animated":false},{"id":"e_ADVANCED_BLOOM_1765019562565_300_GAUSSIAN_BLUR_1765048263809_947_1765614416073","source":"ADVANCED_BLOOM_1765019562565_300_shared_1765614416073","target":"GAUSSIAN_BLUR_1765048263809_947_shared_1765614416073","sourceHandle":"result","targetHandle":"tex","type":"smart","animated":false},{"id":"e_MULTIPLY_1765019591794_111_ADD_1765048284643_6_1765614416073","source":"MULTIPLY_1765019591794_111_shared_1765614416073","target":"ADD_1765048284643_6_shared_1765614416073","sourceHandle":"res","targetHandle":"b","type":"smart","animated":false},{"id":"e_GAUSSIAN_BLUR_1765048263809_947_ADD_1765048284643_6_1765614416073","source":"GAUSSIAN_BLUR_1765048263809_947_shared_1765614416073","target":"ADD_1765048284643_6_shared_1765614416073","sourceHandle":"result","targetHandle":"a","type":"smart","animated":false},{"id":"e_ADD_1765048284643_6_POWER_1765047389370_316_1765614416073","source":"ADD_1765048284643_6_shared_1765614416073","target":"POWER_1765047389370_316_shared_1765614416073","sourceHandle":"res","targetHandle":"a","type":"smart","animated":false},{"id":"e_ADD_1765043642771_157_ADD_1765292379203_939_1765614416073","source":"ADD_1765043642771_157_shared_1765614416073","target":"ADD_1765292379203_939_shared_1765614416073","sourceHandle":"res","targetHandle":"a","type":"smart","animated":false},{"source":"MULTIPLY_1765046812141_809_shared_1765614416073","sourceHandle":"res","target":"1765615470576_0_o16fr","targetHandle":"image","type":"smart","animated":false,"id":"reactflow__edge-MULTIPLY_1765046812141_809_shared_1765614416073res-1765615470576_0_o16frimage"},{"source":"1765615470576_0_o16fr","sourceHandle":"output","target":"ADD_1765292379203_939_shared_1765614416073","targetHandle":"b","type":"smart","animated":false,"id":"reactflow__edge-1765615470576_0_o16froutput-ADD_1765292379203_939_shared_1765614416073b"},{"source":"ADD_1765292379203_939_shared_1765614416073","sourceHandle":"res","target":"BAKE_NODE_1765615514087_846","targetHandle":"image","type":"smart","animated":false,"id":"reactflow__edge-ADD_1765292379203_939_shared_1765614416073res-BAKE_NODE_1765615514087_846image","selected":false},{"source":"MOD_1765044556353_474_shared_1765614416073","sourceHandle":"res","target":"REGISTER_NODE_1768663928842_526","targetHandle":"image","type":"smart","animated":false,"id":"reactflow__edge-MOD_1765044556353_474_shared_1765614416073res-REGISTER_NODE_1768663928842_526image"},{"source":"MOD_1765044556353_474_shared_1765614416073","sourceHandle":"res","target":"ADD_1765044596087_148_shared_1765614416073","targetHandle":"a","type":"smart","animated":false,"id":"reactflow__edge-MOD_1765044556353_474_shared_1765614416073res-ADD_1765044596087_148_shared_1765614416073a"},{"source":"GET_NODE_1768664406691_902","sourceHandle":"result","target":"BAKE_NODE_1765615514087_846","targetHandle":"trigger","type":"smart","animated":false,"id":"reactflow__edge-GET_NODE_1768664406691_902result-BAKE_NODE_1765615514087_846trigger"}]}