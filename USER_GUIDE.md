# GLSL-APP 使用说明（USER GUIDE）

> 这是一份面向“使用者”的简明指南：从快速上手到常用操作。

---

## 1. 应用简介

- 这是一个基于节点（Node）的 GLSL 图形/特效编辑器。
- 通过把节点拖到画布并连接端口，构建一条渲染/生成链路；再通过预览节点查看最终效果。
- 这个工具的目标是：**快速制作、生成与修改游戏特效贴图**。
- 核心体验围绕“快速、方便地制作游戏贴图”展开：**直接拖入图片开始**，用节点快速组合、迭代与调参。
- 相比 AE / SD / PS 等专业工具：更轻量、更聚焦，避免陡峭的学习曲线（并非要替代它们）。

### 1.1 核心概念

- **节点（Node）**：一个运算/生成模块（例如采样纹理、颜色处理、模糊、合成等）。
- **连线（Edge）**：把上游节点的输出连接到下游节点的输入。
- **预览（Preview）**：当前画布中用于显示结果的节点。
- **参数（Uniform）**：节点可编辑的参数（数值/颜色/枚举/贴图等）。

---

## 2. 快速开始（3 分钟上手）

1. 从左侧节点库拖一个节点到画布。
2. 将节点输出连接到预览节点（或设置某个节点为预览）。
3. 在右侧属性/参数面板调整参数，观察预览变化。
4. 保存工程或生成分享链接。

![快速开始示意](docs/media/quickstart.gif)

---

## 3. 基本操作

### 3.1 添加节点

- 从侧边栏将节点拖到画布。

![添加节点](docs/media/addnode.gif)

### 3.2 连接与断开

- 从输出端口拖到输入端口完成连接。
- 断开方式：按住 Alt + 鼠标点击连线。

![连接节点](docs/media/linknode.gif)

### 3.3 选择、移动、删除

- 单选：点击节点。
- 多选：框选或按住组合键。
- 移动：拖动节点。
- 删除：选中后按 Delete/Backspace。

---

## 4. 图片与纹理工作流

### 4.1 拖拽图片到画布

- 直接把图片文件拖到画布，会自动创建 `SAMP_TEXTURE` 节点，并把图片绑定到该节点的 `image` 参数。

![拖拽图片到画布](docs/media/drag-image.gif)

### 4.2 在节点参数里选择/更换图片

- 在 sampler2D 类型的参数控件里选择图片资源。

![更换图片](docs/media/change-image.gif)

---

## 5. 参数（Uniform）编辑

### 5.1 常见参数类型

- 数值：float / int
- 向量：vec2 / vec3 / vec4
- 颜色：color（如果作为 vec3/vec4 呈现）
- 枚举：enum
- 开关：toggle/bool
- 贴图：sampler2D

### 5.2 参数生效规则（建议说明）

- 未连接输入端口时：使用当前节点的 uniform 值。
- 已连接输入端口时：通常以连线输入为准（若你的系统支持“输入覆盖 uniform”，在此说明）。

---

## 6. Custom / GLSL 节点（进阶）

> 本节面向希望写 Shader 的用户。

### 6.1 `run()` 函数约定

- 节点入口函数为：`void run(...)`。
- **第一个参数必须是 `vec2 uv`**（通常表示 0~1 的纹理坐标）。
- 输出参数使用 `out` 关键字声明（节点输出端口来自这些 `out` 参数）。
- 示例（只写函数签名，不写函数体）：

```glsl
void run(vec2 uv, out vec4 outColor);
```

- 也可以包含额外输入/多个输出：

```glsl
void run(vec2 uv, float strength, sampler2D image, out vec4 outColor);
void run(vec2 uv, vec3 a, vec3 b, out vec3 outColor, out float outMask);
```

![自定义 Shader（run 函数签名）](docs/media/custom_shader.gif)

### 6.2 重载（Overload）选择

- 当一个节点包含多个 `run()` 签名时，可以通过重载选择不同签名。
- 可用注释标注排序/显示名：
  - `//Item[name,order]`
  - `order` 越小越靠前；相同按代码出现顺序。

![选择重载](docs/media/overload-picker.gif)

---

## 7. 预览与输出

- 选择需要预览的节点，结果会显示在预览区。

![预览操作](docs/media/preview.gif)

---

## 8. 导入 / 导出 / 分享

### 8.1 保存与加载工程

- 保存：导出工程文件。
- 加载：从文件导入工程。

### 8.2 分享链接

- 生成分享链接并复制。


---

## 9. 版本与反馈

- 版本号：见项目 `CHANGELOG.md`。
- 反馈与问题：建议在项目仓库提 Issue。
